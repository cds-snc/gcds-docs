import{p as t,H as e,c as s,h as a,d as r}from"./p-BQgY5XdM.js";import{h as i,f as o,o as d,a as h,i as l}from"./p-DOKR5HKI.js";import{d as c,g as n,r as g}from"./p-1b8Kykha.js";import{d as u}from"./p-Dff2I2ku.js";import{d as f}from"./p-CZq1Zpp8.js";import{d as b}from"./p-CwNv12Ch.js";import{d as m}from"./p-Cc9yC5rG.js";import{d as x}from"./p-DeFvi7Po.js";const p={en:{characters:{allowed:"characters allowed",left:"characters left"}},fr:{characters:{allowed:"caractères maximum",left:"caractères restants"}}};const v="@layer reset, default, disabled, error, focus;@layer reset{:host{display:block}:host .gcds-textarea-wrapper{border:0;margin:0;padding:0}:host .gcds-textarea-wrapper textarea{box-sizing:border-box}}@layer default{:host .gcds-textarea-wrapper{color:var(--gcds-textarea-default-text);font:var(--gcds-textarea-font-desktop);max-width:75ch;transition:color .15s ease-in-out;width:100%}@media only screen and (width < 48em){:host .gcds-textarea-wrapper{font:var(--gcds-textarea-font-mobile)}}:host .gcds-textarea-wrapper textarea{background-color:var(--gcds-textarea-default-background);background-image:none;border:var(--gcds-textarea-border-width) solid;border-radius:var(--gcds-textarea-border-radius);color:var(--gcds-textarea-default-text);display:block;font:inherit;height:auto;margin:var(--gcds-textarea-margin)!important;max-width:100%;min-height:var(--gcds-textarea-min-height);min-width:50%;padding:var(--gcds-textarea-padding)!important;transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out,outline .15s ease-in-out;width:100%}}@layer disabled{:host .gcds-textarea-wrapper.gcds-disabled{color:var(--gcds-textarea-disabled-text)}:host .gcds-textarea-wrapper.gcds-disabled gcds-label{--gcds-label-text:currentColor}:host .gcds-textarea-wrapper.gcds-disabled gcds-hint{--gcds-hint-text:currentColor}:host .gcds-textarea-wrapper.gcds-disabled textarea:disabled{background-color:var(--gcds-textarea-disabled-background);border-color:var(--gcds-textarea-disabled-text);cursor:not-allowed}}@layer error{:host .gcds-textarea-wrapper .error-message-container{display:block}:host .gcds-textarea-wrapper textarea.gcds-error:not(:focus){border-color:var(--gcds-textarea-danger-border)}}@layer focus{:host .gcds-textarea-wrapper:focus-within textarea:focus{border-color:var(--gcds-textarea-focus-border);box-shadow:var(--gcds-textarea-focus-box-shadow);outline:var(--gcds-textarea-outline-width) solid var(--gcds-textarea-focus-border);outline-offset:var(--gcds-textarea-border-width)}}";const w=t(class t extends e{constructor(){super();this.__registerHost();this.__attachShadow();this.gcdsFocus=s(this,"gcdsFocus");this.gcdsBlur=s(this,"gcdsBlur");this.gcdsChange=s(this,"gcdsChange");this.gcdsInput=s(this,"gcdsInput");this.gcdsError=s(this,"gcdsError");this.gcdsValid=s(this,"gcdsValid");this.internals=this.attachInternals();this.htmlValidationErrors=[];this.textareaTitle="";this._validator=c;this.disabled=false;this.hideLabel=false;this.required=false;this.rows=5;this.validateOn="blur";this.inheritedAttributes={};this.onBlur=()=>{if(this.validateOn=="blur"){this.validate()}this.gcdsBlur.emit()};this.handleInput=(t,e)=>{const s=t.target&&t.target.value;this.value=s;this.internals.setFormValue(s?s:null);this.shadowElement.value=s;if(t.type==="change"){const e=new t.constructor(t.type,t);this.el.dispatchEvent(e)}else{this.updateValidity()}e.emit(this.value)}}validateDisabledTextarea(){if(this.required){this.disabled=false}}validateErrorMessage(){if(this.disabled){this.errorMessage=""}else if(!this.hasError&&this.errorMessage){this.hasError=true}else if(this.errorMessage==""){this.hasError=false}}watchValue(t){if(this.shadowElement){this.shadowElement.value=t||""}this.internals.setFormValue(t||null)}validateValidator(){this._validator=n(this.validator)}get validity(){return this.internals.validity}validateHasError(){if(this.disabled){this.hasError=false}}async validate(){i(this.el,this._validator.validate(this.value),this.label,this.gcdsError,this.gcdsValid,this.lang);if(this.required&&!this.internals.checkValidity()||!this.internals.checkValidity()){if(!this.internals.validity.valueMissing){this.errorMessage=o(this.htmlValidationErrors[0],this.lang,this.el);this.textareaTitle=this.errorMessage}}}async checkValidity(){return this.internals.checkValidity()}async getValidationMessage(){return this.internals.validationMessage}submitListener(t){if(t.target==this.el.closest("form")){if(this.validateOn&&this.validateOn!="other"){this.validate()}if(this.hasError&&this.validateOn!="other"){t.preventDefault()}}}formResetCallback(){if(this.value!==this.initialValue){this.value=this.initialValue;if(this.shadowElement){this.shadowElement.value=this.initialValue||""}this.internals.setFormValue(this.initialValue||null)}}formStateRestoreCallback(t){this.internals.setFormValue(t);this.value=t}updateValidity(t){const e=this.shadowElement.validity;this.htmlValidationErrors=[];for(const t in e){if(e[t]===true&&t!=="valid"){this.htmlValidationErrors.push(t)}}for(const e in t){this.htmlValidationErrors.push(e)}const s=t?Object.assign(Object.assign({},this.shadowElement.validity),t):this.shadowElement.validity;let a=null;if(this.htmlValidationErrors.length>0){a=o(this.htmlValidationErrors[0],this.lang,this.el)}this.internals.setValidity(s,a,this.shadowElement);this.textareaTitle=a}updateLang(){const t=new MutationObserver((t=>{if(t[0].oldValue!=this.el.lang){this.lang=this.el.lang}}));t.observe(this.el,d)}async componentWillLoad(){this.lang=h(this.el);this.updateLang();this.validateDisabledTextarea();this.validateHasError();this.validateErrorMessage();g(this.el,"textarea");this.validateValidator();this.inheritedAttributes=l(this.el,this.shadowElement,["placeholder"]);this.internals.setFormValue(this.value?this.value:null);this.initialValue=this.value?this.value:null}componentDidLoad(){let t;if(this.value&&(this.minlength||this.characterCount)){if(this.minlength&&this.value.length<this.minlength){t={tooShort:true}}else if(this.characterCount&&this.value.length>this.characterCount){t={tooLong:true}}}this.updateValidity(t);if(this.autofocus){requestAnimationFrame((()=>{var t;(t=this.shadowElement)===null||t===void 0?void 0:t.focus()}))}}render(){const{autofocus:t,characterCount:e,cols:s,disabled:i,errorMessage:o,hideLabel:d,hint:h,label:l,minlength:c,required:n,rows:g,textareaId:u,value:f,hasError:b,inheritedAttributes:m,lang:x,name:v,textareaTitle:w}=this;const y={maxWidth:`${s*1.5}ch`};const k={label:l,required:n};const E=Object.assign({name:v,autofocus:t,disabled:i,minlength:c,required:n,rows:g,title:w},m);if(h||o||e){const t=h?`hint-${u} `:"";const s=o?`error-message-${u} `:"";const a=e?`textarea__count-${u} `:"";E["aria-describedby"]=`${t}${s}${a}${E["aria-describedby"]?`${E["aria-describedby"]}`:""}`}return a(r,{key:"462ff694237b5ece2b94a25006fa2166c82c3130"},a("div",{key:"418df2a7b21570cb908dd30cb958a01fe95f2f87",class:`gcds-textarea-wrapper ${i?"gcds-disabled":""} ${b?"gcds-error":""}`},a("gcds-label",Object.assign({key:"9e09924f599db5ef90109d0ae5141e00fce25455"},k,{"hide-label":d,"label-for":u,lang:x})),h?a("gcds-hint",{"hint-id":u},h):null,o?a("gcds-error-message",{messageId:u},o):null,a("textarea",Object.assign({key:"3dc1cafeace916ff5fe1b644a0a47223d0e2c76c"},E,{class:b?"gcds-error":null,id:u,onBlur:()=>this.onBlur(),onFocus:()=>this.gcdsFocus.emit(),onInput:t=>this.handleInput(t,this.gcdsInput),onChange:t=>this.handleInput(t,this.gcdsChange),"aria-labelledby":`label-for-${u}`,"aria-invalid":o?"true":"false",maxlength:e?e:null,style:s?y:null,ref:t=>this.shadowElement=t}),f),e?a("gcds-text",{id:`textarea__count-${u}`,"aria-live":"polite"},f==undefined?`${e} ${p[x].characters.allowed}`:`${e-f.length} ${p[x].characters.left}`):null))}static get delegatesFocus(){return true}static get formAssociated(){return true}get el(){return this}static get watchers(){return{disabled:["validateDisabledTextarea"],errorMessage:["validateErrorMessage"],value:["watchValue"],validator:["validateValidator"],hasError:["validateHasError"]}}static get style(){return v}},[81,"gcds-textarea",{autofocus:[516],characterCount:[2,"character-count"],minlength:[514],cols:[2],disabled:[1028],errorMessage:[1025,"error-message"],hideLabel:[4,"hide-label"],hint:[1],label:[1],name:[1],required:[4],rows:[2],textareaId:[1,"textarea-id"],value:[1025],validator:[1040],validateOn:[1025,"validate-on"],validity:[2064],inheritedAttributes:[32],hasError:[32],lang:[32],validate:[64],checkValidity:[64],getValidationMessage:[64]},[[4,"submit","submitListener"]],{disabled:["validateDisabledTextarea"],errorMessage:["validateErrorMessage"],value:["watchValue"],validator:["validateValidator"],hasError:["validateHasError"]}]);function y(){if(typeof customElements==="undefined"){return}const t=["gcds-textarea","gcds-error-message","gcds-hint","gcds-icon","gcds-label","gcds-text"];t.forEach((t=>{switch(t){case"gcds-textarea":if(!customElements.get(t)){customElements.define(t,w)}break;case"gcds-error-message":if(!customElements.get(t)){u()}break;case"gcds-hint":if(!customElements.get(t)){f()}break;case"gcds-icon":if(!customElements.get(t)){b()}break;case"gcds-label":if(!customElements.get(t)){m()}break;case"gcds-text":if(!customElements.get(t)){x()}break}}))}const k=w;const E=y;export{k as GcdsTextarea,E as defineCustomElement};
//# sourceMappingURL=gcds-textarea.js.map