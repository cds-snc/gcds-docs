import{p as e,H as t,d as a,h as s,c as r}from"./p-Bid1IElL.js";import{h as i,o as d,a as o,i as l}from"./p-BphlHDEW.js";import{d as c,g as h,r as n}from"./p-BwGU8uxz.js";import{d as g}from"./p-BPUZBykJ.js";import{d as u}from"./p-COMIv74k.js";import{d as b}from"./p-CkVRd3cw.js";import{d as f}from"./p-A25Hiffv.js";import{d as x}from"./p-C4FL9OV7.js";const m={en:{characters:{allowed:"characters allowed",left:"characters left"}},fr:{characters:{allowed:"caractères maximum",left:"caractères restants"}}};const p="@layer reset, default, disabled, error, focus;@layer reset{:host{display:block}:host .gcds-textarea-wrapper{border:0;margin:0;padding:0}:host .gcds-textarea-wrapper textarea{box-sizing:border-box}}@layer default{:host .gcds-textarea-wrapper{color:var(--gcds-textarea-default-text);font:var(--gcds-textarea-font);max-width:75ch;transition:color .15s ease-in-out;width:100%}:host .gcds-textarea-wrapper textarea{background-color:var(--gcds-textarea-default-background);background-image:none;border:var(--gcds-textarea-border-width) solid;border-radius:var(--gcds-textarea-border-radius);color:var(--gcds-textarea-default-text);display:block;font:inherit;height:auto;margin:var(--gcds-textarea-margin)!important;max-width:100%;min-height:var(--gcds-textarea-min-height);min-width:50%;padding:var(--gcds-textarea-padding)!important;transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out,outline .15s ease-in-out;width:100%}}@layer disabled{:host .gcds-textarea-wrapper.gcds-disabled{color:var(--gcds-textarea-disabled-text)}:host .gcds-textarea-wrapper.gcds-disabled gcds-label{--gcds-label-text:currentColor}:host .gcds-textarea-wrapper.gcds-disabled gcds-hint{--gcds-hint-text:currentColor}:host .gcds-textarea-wrapper.gcds-disabled textarea:disabled{background-color:var(--gcds-textarea-disabled-background);border-color:var(--gcds-textarea-disabled-text);cursor:not-allowed}}@layer error{:host .gcds-textarea-wrapper .error-message-container{display:block}:host .gcds-textarea-wrapper textarea.gcds-error:not(:focus){border-color:var(--gcds-textarea-danger-border)}}@layer focus{:host .gcds-textarea-wrapper:focus-within textarea:focus{border-color:var(--gcds-textarea-focus-border);box-shadow:var(--gcds-textarea-focus-box-shadow);outline:var(--gcds-textarea-outline-width) solid var(--gcds-textarea-focus-border);outline-offset:var(--gcds-textarea-border-width)}}";const v=e(class e extends t{constructor(){super();this.__registerHost();this.__attachShadow();this.gcdsFocus=a(this,"gcdsFocus");this.gcdsBlur=a(this,"gcdsBlur");this.gcdsChange=a(this,"gcdsChange");this.gcdsInput=a(this,"gcdsInput");this.gcdsError=a(this,"gcdsError");this.gcdsValid=a(this,"gcdsValid");this.internals=this.attachInternals();this._validator=c;this.disabled=false;this.hideLabel=false;this.required=false;this.rows=5;this.validateOn="blur";this.inheritedAttributes={};this.onBlur=()=>{if(this.validateOn=="blur"){this.validate()}this.gcdsBlur.emit()};this.handleInput=(e,t)=>{const a=e.target&&e.target.value;this.value=a;this.internals.setFormValue(a?a:null);this.shadowElement.value=a;if(e.type==="change"){const t=new e.constructor(e.type,e);this.el.dispatchEvent(t)}t.emit(this.value)}}validateDisabledTextarea(){if(this.required){this.disabled=false}}validateErrorMessage(){if(this.disabled){this.errorMessage=""}else if(!this.hasError&&this.errorMessage){this.hasError=true}else if(this.errorMessage==""){this.hasError=false}}watchValue(e){this.shadowElement.value=e;this.internals.setFormValue(e?e:null)}validateValidator(){this._validator=h(this.validator)}validateHasError(){if(this.disabled){this.hasError=false}}async validate(){i(this.el,this._validator.validate(this.value),this.label,this.gcdsError,this.gcdsValid,this.lang)}submitListener(e){if(e.target==this.el.closest("form")){if(this.validateOn&&this.validateOn!="other"){this.validate()}if(this.hasError&&this.validateOn!="other"){e.preventDefault()}}}formResetCallback(){if(this.value!=this.initialValue){this.internals.setFormValue(this.initialValue);this.value=this.initialValue;this.shadowElement.value=this.initialValue}}formStateRestoreCallback(e){this.internals.setFormValue(e);this.value=e}updateLang(){const e=new MutationObserver((e=>{if(e[0].oldValue!=this.el.lang){this.lang=this.el.lang}}));e.observe(this.el,d)}async componentWillLoad(){this.lang=o(this.el);this.updateLang();this.validateDisabledTextarea();this.validateHasError();this.validateErrorMessage();n(this.el,"textarea");this.validateValidator();this.inheritedAttributes=l(this.el,this.shadowElement,["placeholder"]);this.internals.setFormValue(this.value?this.value:null);this.initialValue=this.value?this.value:null}render(){const{characterCount:e,cols:t,disabled:a,errorMessage:i,hideLabel:d,hint:o,label:l,required:c,rows:h,textareaId:n,value:g,hasError:u,inheritedAttributes:b,lang:f,name:x}=this;const p={maxWidth:`${t*1.5}ch`};const v={label:l,required:c};const w=Object.assign({name:x,disabled:a,required:c,rows:h},b);if(o||i||e){const t=o?`hint-${n} `:"";const a=i?`error-message-${n} `:"";const s=e?`textarea__count-${n} `:"";w["aria-describedby"]=`${t}${a}${s}${w["aria-describedby"]?`${w["aria-describedby"]}`:""}`}return s(r,{key:"9f6085eebb44aa57efec27ebada1e2f3640be66d"},s("div",{key:"20fafaf3a8e37d9db2937adfea4de3dc796aa2d5",class:`gcds-textarea-wrapper ${a?"gcds-disabled":""} ${u?"gcds-error":""}`},s("gcds-label",Object.assign({key:"27490b5d8e9251e43b7d4d232609e597cb3b5ed4"},v,{"hide-label":d,"label-for":n,lang:f})),o?s("gcds-hint",{"hint-id":n},o):null,i?s("gcds-error-message",{messageId:n},i):null,s("textarea",Object.assign({key:"724f1be7d23f0a8495c5be9678720c67c9305ebc"},w,{class:u?"gcds-error":null,id:n,onBlur:()=>this.onBlur(),onFocus:()=>this.gcdsFocus.emit(),onInput:e=>this.handleInput(e,this.gcdsInput),onChange:e=>this.handleInput(e,this.gcdsChange),"aria-labelledby":`label-for-${n}`,"aria-invalid":i?"true":"false",maxlength:e?e:null,style:t?p:null,ref:e=>this.shadowElement=e}),g),e?s("gcds-text",{id:`textarea__count-${n}`,"aria-live":"polite"},g==undefined?`${e} ${m[f].characters.allowed}`:`${e-g.length} ${m[f].characters.left}`):null))}static get delegatesFocus(){return true}static get formAssociated(){return true}get el(){return this}static get watchers(){return{disabled:["validateDisabledTextarea"],errorMessage:["validateErrorMessage"],value:["watchValue"],validator:["validateValidator"],hasError:["validateHasError"]}}static get style(){return p}},[81,"gcds-textarea",{characterCount:[2,"character-count"],cols:[2],disabled:[1028],errorMessage:[1025,"error-message"],hideLabel:[4,"hide-label"],hint:[1],label:[1],name:[1],required:[4],rows:[2],textareaId:[1,"textarea-id"],value:[1025],validator:[1040],validateOn:[1025,"validate-on"],inheritedAttributes:[32],hasError:[32],lang:[32],validate:[64]},[[4,"submit","submitListener"]],{disabled:["validateDisabledTextarea"],errorMessage:["validateErrorMessage"],value:["watchValue"],validator:["validateValidator"],hasError:["validateHasError"]}]);function w(){if(typeof customElements==="undefined"){return}const e=["gcds-textarea","gcds-error-message","gcds-hint","gcds-icon","gcds-label","gcds-text"];e.forEach((e=>{switch(e){case"gcds-textarea":if(!customElements.get(e)){customElements.define(e,v)}break;case"gcds-error-message":if(!customElements.get(e)){g()}break;case"gcds-hint":if(!customElements.get(e)){u()}break;case"gcds-icon":if(!customElements.get(e)){b()}break;case"gcds-label":if(!customElements.get(e)){f()}break;case"gcds-text":if(!customElements.get(e)){x()}break}}))}const k=v;const E=w;export{k as GcdsTextarea,E as defineCustomElement};
//# sourceMappingURL=gcds-textarea.js.map