{"version":3,"names":["I18N","en","date","version","fr","gcdsDateModifiedCss","GcdsDateModified","__stencil_proxyCustomElement","HTMLElement","constructor","this","type","errors","updateLang","observer","MutationObserver","mutations","oldValue","el","lang","observe","observerConfig","validateChildren","innerHTML","trim","push","includes","splice","indexOf","validateRequiredProps","componentWillLoad","assignLanguage","valid","logError","render","h","Host","key","class","display","i18n"],"sources":["src/components/gcds-date-modified/i18n/i18n.js","src/components/gcds-date-modified/gcds-date-modified.css?tag=gcds-date-modified&encapsulation=shadow","src/components/gcds-date-modified/gcds-date-modified.tsx"],"sourcesContent":["const I18N = {\n  en: {\n    date: 'Date modified:',\n    version: 'Version ',\n  },\n  fr: {\n    date: 'Date de modification :',\n    version: 'Version ',\n  },\n};\n\nexport default I18N;\n","@layer reset, default;\n\n@layer reset {\n  :host {\n    display: block;\n\n    dl {\n      margin: 0;\n    }\n\n    slot {\n      display: initial;\n    }\n  }\n}\n\n@layer default {\n  :host .gcds-date-modified {\n    margin: var(--gcds-date-modified-margin);\n\n    :is(dt, gcds-text, dd) {\n      display: inline;\n    }\n\n    dd {\n      margin: var(--gcds-date-modified-description-margin);\n    }\n\n    gcds-text::part(text) {\n      font: var(--gcds-date-modified-font);\n    }\n  }\n}\n","import { Component, Element, Host, Prop, State, h } from '@stencil/core';\nimport { assignLanguage, observerConfig, logError } from '../../utils/utils';\nimport i18n from './i18n/i18n';\n\n/**\n * Date modified is an indicator of the last update to a webpage or application.\n *\n * @slot default - Slot for the date/version number.\n */\n@Component({\n  tag: 'gcds-date-modified',\n  styleUrl: 'gcds-date-modified.css',\n  shadow: true,\n})\nexport class GcdsDateModified {\n  @Element() el: HTMLElement;\n\n  /**\n   * Props\n   */\n\n  /**\n   * Set date modified type. Default is date.\n   */\n  @Prop({ mutable: true }) type: 'date' | 'version' = 'date';\n\n  /**\n   * State to track validation on properties\n   * Contains a list of properties that have an error associated with them\n   */\n  @State() errors: Array<string> = [];\n\n  /**\n   * Language of rendered component\n   */\n  @State() lang: string;\n\n  /*\n   * Observe lang attribute change\n   */\n  updateLang() {\n    const observer = new MutationObserver(mutations => {\n      if (mutations[0].oldValue != this.el.lang) {\n        this.lang = this.el.lang;\n      }\n    });\n    observer.observe(this.el, observerConfig);\n  }\n\n  private validateChildren() {\n    if (this.el.innerHTML.trim() == '') {\n      this.errors.push('children');\n    } else if (this.errors.includes('children')) {\n      this.errors.splice(this.errors.indexOf('children'), 1);\n    }\n  }\n\n  private validateRequiredProps() {\n    this.validateChildren();\n\n    if (this.errors.includes('children')) {\n      return false;\n    }\n    return true;\n  }\n\n  async componentWillLoad() {\n    // Define lang attribute\n    this.lang = assignLanguage(this.el);\n\n    this.updateLang();\n\n    const valid = this.validateRequiredProps();\n\n    if (!valid) {\n      logError('gcds-date-modified', this.errors);\n    }\n  }\n\n  render() {\n    const { lang, type } = this;\n\n    return (\n      <Host>\n        {this.validateRequiredProps() && (\n          <dl class=\"gcds-date-modified\">\n            <dt>\n              <gcds-text display=\"inline\" margin-bottom=\"0\">\n                {type === 'version' ? i18n[lang].version : i18n[lang].date}\n              </gcds-text>\n            </dt>\n            <dd>\n              <gcds-text display=\"inline\" margin-bottom=\"0\">\n                {type === 'version' ? (\n                  <slot></slot>\n                ) : (\n                  <time>\n                    <slot></slot>\n                  </time>\n                )}\n              </gcds-text>\n            </dd>\n          </dl>\n        )}\n      </Host>\n    );\n  }\n}\n"],"mappings":"0IAAA,MAAMA,EAAO,CACXC,GAAI,CACFC,KAAM,iBACNC,QAAS,YAEXC,GAAI,CACFF,KAAM,yBACNC,QAAS,aCPb,MAAME,EAAsB,6Z,MCcfC,EAAgBC,EAAA,MAAAD,UAAAE,EAL7B,WAAAC,G,oDAe2BC,KAAIC,KAAuB,OAM3CD,KAAME,OAAkB,EA6ElC,CAnEC,UAAAC,GACE,MAAMC,EAAW,IAAIC,kBAAiBC,IACpC,GAAIA,EAAU,GAAGC,UAAYP,KAAKQ,GAAGC,KAAM,CACzCT,KAAKS,KAAOT,KAAKQ,GAAGC,I,KAGxBL,EAASM,QAAQV,KAAKQ,GAAIG,E,CAGpB,gBAAAC,GACN,GAAIZ,KAAKQ,GAAGK,UAAUC,QAAU,GAAI,CAClCd,KAAKE,OAAOa,KAAK,W,MACZ,GAAIf,KAAKE,OAAOc,SAAS,YAAa,CAC3ChB,KAAKE,OAAOe,OAAOjB,KAAKE,OAAOgB,QAAQ,YAAa,E,EAIhD,qBAAAC,GACNnB,KAAKY,mBAEL,GAAIZ,KAAKE,OAAOc,SAAS,YAAa,CACpC,OAAO,K,CAET,OAAO,I,CAGT,uBAAMI,GAEJpB,KAAKS,KAAOY,EAAerB,KAAKQ,IAEhCR,KAAKG,aAEL,MAAMmB,EAAQtB,KAAKmB,wBAEnB,IAAKG,EAAO,CACVC,EAAS,qBAAsBvB,KAAKE,O,EAIxC,MAAAsB,GACE,MAAMf,KAAEA,EAAIR,KAAEA,GAASD,KAEvB,OACEyB,EAACC,EAAI,CAAAC,IAAA,4CACF3B,KAAKmB,yBACJM,EAAI,MAAAE,IAAA,2CAAAC,MAAM,sBACRH,EAAA,MAAAE,IAAA,4CACEF,EAAA,aAAAE,IAAA,2CAAWE,QAAQ,SAAQ,gBAAe,KACvC5B,IAAS,UAAY6B,EAAKrB,GAAMhB,QAAUqC,EAAKrB,GAAMjB,OAG1DiC,EAAA,MAAAE,IAAA,4CACEF,EAAA,aAAAE,IAAA,2CAAWE,QAAQ,SAAQ,gBAAe,KACvC5B,IAAS,UACRwB,EAAA,aAEAA,EAAA,YACEA,EAAa,iB","ignoreList":[]}