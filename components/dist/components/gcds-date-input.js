import{p as t,H as e,c as s,h as i,d as a}from"./p-BQgY5XdM.js";import{b as r,h as n,o as d,a as l,l as o}from"./p-UMQcBsvp.js";import{d as h,g as c,r as u}from"./p-B_Gmbhz4.js";import{d as m}from"./p-DQpQ5NCu.js";import{d as f}from"./p-CZq1Zpp8.js";import{d as g}from"./p-BwC_j5YS.js";import{d as p}from"./p-DUJunnqm.js";import{d as b}from"./p-Q5n6GMRG.js";import{d as v}from"./p-DNkFHnlw.js";import{d as y}from"./p-DeFvi7Po.js";const _={en:{year:"Year",month:"Month",day:"Day",selectmonth:"Select a month",months:{"01":"January","02":"February","03":"March","04":"April","05":"May","06":"June","07":"July","08":"August","09":"September",10:"October",11:"November",12:"December"},valueError:"gcds-date-input:  Value attribute contains an invalid date format. Expected format: ",valueFormatfull:"YYYY-MM-DD",valueFormatcompact:"YYYY-MM",required:" (required)"},fr:{year:"Année",month:"Mois",day:"Jour",selectmonth:"Sélectionnez un mois",months:{"01":"janvier","02":"février","03":"mars","04":"avril","05":"mai","06":"juin","07":"juillet","08":"août","09":"septembre",10:"octobre",11:"novembre",12:"décembre"},valueError:"gcds-date-input:  Value attribute contains an invalid date format. Expected format: ",valueFormatfull:"YYYY-MM-DD",valueFormatcompact:"YYYY-MM",required:" (obligatoire)"}};const $="@layer reset, default, hint, error;@layer reset{:host{display:block}:host .gcds-date-input__fieldset{border:0;min-inline-size:auto;padding:0}:host .gcds-date-input__fieldset legend{padding:0}}@layer default{:host .gcds-date-input__fieldset legend{color:var(--gcds-date-input-fieldset-text);font:var(--gcds-date-input-fieldset-font-desktop)}:host .gcds-date-input__fieldset legend .legend__required{font:var(--gcds-date-input-fieldset-required-font-desktop);margin:var(--gcds-date-input-fieldset-required-margin)!important;vertical-align:middle}@media only screen and (width < 48em){:host .gcds-date-input__fieldset legend{font:var(--gcds-date-input-fieldset-font-mobile)}:host .gcds-date-input__fieldset legend .legend__required{font:var(--gcds-date-input-fieldset-required-font-mobile)}}:host .gcds-date-input__day,:host .gcds-date-input__month,:host .gcds-date-input__year{display:inline-block;margin-inline-end:var(--gcds-date-input-margin);--gcds-label-font-desktop:var(--gcds-date-input-label-font-desktop);--gcds-label-font-mobile:var(--gcds-date-input-label-font-mobile )}}@layer hint{:host gcds-hint{margin:var(--gcds-date-input-fieldset-hint-margin)}}@layer error{:host gcds-input.gcds-date-input--error::part(input),:host gcds-select.gcds-date-input--error::part(select){border-color:var(--gcds-date-input-danger-border)}}";const k=t(class t extends e{constructor(){super();this.__registerHost();this.__attachShadow();this.gcdsFocus=s(this,"gcdsFocus");this.gcdsBlur=s(this,"gcdsBlur");this.gcdsInput=s(this,"gcdsInput");this.gcdsChange=s(this,"gcdsChange");this.gcdsError=s(this,"gcdsError");this.gcdsValid=s(this,"gcdsValid");this.internals=this.attachInternals();this._validator=h;this.required=false;this.disabled=false;this.validateOn="blur";this.monthValue="";this.dayValue="";this.yearValue="";this.hasError={day:false,month:false,year:false};this.errors=[];this.onBlur=()=>{if(this.validateOn=="blur"){this.validate()}};this.handleInput=(t,e)=>{const s=t.target&&t.target.value;if(e==="year"){this.yearValue=s}else if(e==="month"){this.monthValue=s}else if(e==="day"){this.dayValue=s}this.setValue();if(t.type==="change"){const e=new t.constructor(t.type,t);this.el.dispatchEvent(e)}}}validateName(){if(!this.name){this.errors.push("name")}else if(this.errors.includes("name")){this.errors.splice(this.errors.indexOf("name"),1)}}validateLegend(){if(!this.legend){this.errors.push("legend")}else if(this.errors.includes("legend")){this.errors.splice(this.errors.indexOf("legend"),1)}}validateFormat(){if(!this.format||this.format!="full"&&this.format!="compact"){this.errors.push("format")}else if(this.errors.includes("format")){this.errors.splice(this.errors.indexOf("format"),1)}}validateValue(){if(this.value&&!r(this.value)){this.errors.push("value");this.value=null;console.error(`${_["en"].valueError}${_["en"][`valueFormat${this.format}`]} | ${_["fr"].valueError}${_["fr"][`valueFormat${this.format}`]}`)}else if(this.errors.includes("value")){this.errors.splice(this.errors.indexOf("value"),1)}if(this.value){this.splitFormValue();this.internals.setFormValue(this.value)}}validateValidator(){this._validator=c(this.validator)}async validate(){this.hasError=n(this.el,this._validator.validate(this.format==="full"?`${this.yearValue}-${this.monthValue}-${this.dayValue}`:`${this.yearValue}-${this.monthValue}`),this.legend,this.gcdsError,this.gcdsValid,this.lang,{day:false,month:false,year:false})}async submitListener(t){if(t.target==this.el.closest("form")){if(this.validateOn&&this.validateOn!="other"){this.validate()}for(const e in this.hasError){if(this.hasError[e]&&this.validateOn!="other"){t.preventDefault()}}}}formResetCallback(){if(this.value!=this.initialValue){this.internals.setFormValue(this.initialValue);this.value=this.initialValue}}formStateRestoreCallback(t){this.internals.setFormValue(t);this.value=t}updateLang(){const t=new MutationObserver((t=>{if(t[0].oldValue!=this.el.lang){this.lang=this.el.lang}}));t.observe(this.el,d)}setValue(){const{yearValue:t,monthValue:e,format:s}=this;let{dayValue:i}=this;if(i&&i.length===1&&i!="0"){i="0"+i;this.dayValue=i}else if(i&&i.length==3&&i[0]==="0"){i=i.substring(1);this.dayValue=i}if(t&&e&&i&&s=="full"){if(r(`${t}-${e}-${i}`,s)){this.value=`${t}-${e}-${i}`;this.internals.setFormValue(this.value)}else{this.value=null;this.internals.setFormValue(null);return false}}else if(t&&e&&s=="compact"){if(r(`${t}-${e}`,s)){this.value=`${t}-${e}`;this.internals.setFormValue(this.value)}else{this.value=null;this.internals.setFormValue(null);return false}}else{this.value=null;this.internals.setFormValue(null);return false}return true}splitFormValue(){if(this.value&&r(this.value,this.format)){if(this.format=="compact"){const t=this.value.split("-");this.yearValue=t[0];this.monthValue=t[1]}else{const t=this.value.split("-");this.yearValue=t[0];this.monthValue=t[1];this.dayValue=t[2]}}}validateRequiredProps(){this.validateName();this.validateLegend();this.validateFormat();if(this.errors.includes("name")||this.errors.includes("legend")||this.errors.includes("format")){return false}return true}async componentWillLoad(){this.lang=l(this.el);this.updateLang();u(this.el,"date-input");this.validateValidator();const t=this.validateRequiredProps();if(!t){o("gcds-date-input",this.errors)}this.validateValue();if(this.value&&r(this.value)){this.splitFormValue();this.setValue();this.initialValue=this.value}}render(){const{legend:t,name:e,format:s,required:r,hint:n,errorMessage:d,disabled:l,lang:o,hasError:h}=this;const c={};if(r){c["aria-required"]="true"}const u={tabindex:"-1","aria-labelledby":"date-input-legend"};if(n){const t=this.hint?`date-input-hint `:"";u["aria-labelledby"]=`${u["aria-labelledby"]} ${t}`.trim()}const m=Array.from({length:12},((t,e)=>e+1<10?`0${e+1}`:`${e+1}`));const f=i("gcds-select",Object.assign({key:"abc4d3370422e57659e6a6558d7fb7bf067e6b9b",label:_[o].month,selectId:"month",name:"month",defaultValue:_[o].selectmonth,disabled:l,onInput:t=>this.handleInput(t,"month"),onChange:t=>this.handleInput(t,"month"),value:this.monthValue,class:`gcds-date-input__month ${h["month"]?"gcds-date-input--error":""}`},c,{"aria-invalid":h["month"].toString(),"aria-description":h["month"]&&d}),m.map((t=>i("option",{key:t,value:t},_[o]["months"][t]))));const g=i("gcds-input",Object.assign({key:"092c62acae1ec98b7febaff0ad007d9bd3c6f68b",name:"year",label:_[o].year,inputId:"year",type:"number",size:4,disabled:l,value:this.yearValue,onInput:t=>this.handleInput(t,"year"),onChange:t=>this.handleInput(t,"year"),class:`gcds-date-input__year ${h["year"]?"gcds-date-input--error":""}`},c,{"aria-invalid":h["year"].toString(),"aria-description":h["year"]&&d}));const p=i("gcds-input",Object.assign({key:"6628caf1b8373531227bc5f9f61a386b8e16b578",name:"day",label:_[o].day,inputId:"day",type:"number",size:2,disabled:l,value:this.dayValue,onInput:t=>this.handleInput(t,"day"),onChange:t=>this.handleInput(t,"day"),class:`gcds-date-input__day ${h["day"]?"gcds-date-input--error":""}`},c,{"aria-invalid":h["day"].toString(),"aria-description":h["day"]&&d}));return i(a,{key:"6a745c12f4724ed7e8c2bb5557f11aa3db6f79cc",name:e,onBlur:()=>this.onBlur()},this.validateRequiredProps()&&i("fieldset",Object.assign({key:"a6292573f7b565a71be618eaf8df565cc8490f91",class:"gcds-date-input__fieldset"},u),i("legend",{key:"f712f4436c7c6e57a2c71c31ec688b8c4977cc42",id:"date-input-legend"},t,r?i("span",{class:"legend__required"},_[o].required):null),n?i("gcds-hint",{id:"date-input-hint","hint-id":"date-input"},n):null,d?i("div",null,i("gcds-error-message",{id:"date-input-error",messageId:"date-input"},d)):null,s=="compact"?[f,g]:o=="en"?[f,p,g]:[p,f,g]))}static get delegatesFocus(){return true}static get formAssociated(){return true}get el(){return this}static get watchers(){return{name:["validateName"],legend:["validateLegend"],format:["validateFormat"],value:["validateValue"],validator:["validateValidator"]}}static get style(){return $}},[81,"gcds-date-input",{name:[1],legend:[1],format:[1],value:[1025],required:[4],hint:[1],errorMessage:[1025,"error-message"],disabled:[1028],validator:[1040],validateOn:[1025,"validate-on"],monthValue:[32],dayValue:[32],yearValue:[32],hasError:[32],errors:[32],lang:[32],validate:[64]},[[4,"submit","submitListener"]],{name:["validateName"],legend:["validateLegend"],format:["validateFormat"],value:["validateValue"],validator:["validateValidator"]}]);function Y(){if(typeof customElements==="undefined"){return}const t=["gcds-date-input","gcds-error-message","gcds-hint","gcds-icon","gcds-input","gcds-label","gcds-select","gcds-text"];t.forEach((t=>{switch(t){case"gcds-date-input":if(!customElements.get(t)){customElements.define(t,k)}break;case"gcds-error-message":if(!customElements.get(t)){m()}break;case"gcds-hint":if(!customElements.get(t)){f()}break;case"gcds-icon":if(!customElements.get(t)){g()}break;case"gcds-input":if(!customElements.get(t)){p()}break;case"gcds-label":if(!customElements.get(t)){b()}break;case"gcds-select":if(!customElements.get(t)){v()}break;case"gcds-text":if(!customElements.get(t)){y()}break}}))}const j=k;const M=Y;export{j as GcdsDateInput,M as defineCustomElement};
//# sourceMappingURL=gcds-date-input.js.map