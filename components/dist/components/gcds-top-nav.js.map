{"version":3,"names":["I18N","en","closeTrigger","menuLabel","navLabel","fr","gcdsTopNavCss","GcdsTopNav","__stencil_proxyCustomElement","HTMLElement","constructor","this","alignment","navItems","focusInListener","e","el","contains","target","navSize","mediaQuery","window","matchMedia","nav","mobileTrigger","mobile","matches","updateNavItemQueue","addEventListener","async","updateNavSize","hasAttribute","toggleNav","childNavGroups","querySelectorAll","forEach","navGroup","focusOutListener","relatedTarget","keyDownListener","document","activeElement","handleKeyDownNav","open","key","gcdsClickListener","nodeName","focusTrigger","updateLang","observer","MutationObserver","mutations","oldValue","lang","observe","observerConfig","getNavSize","size","includeElement","childElements","getNavItems","componentWillLoad","assignLanguage","render","label","h","Host","class","openTrigger","ref","element","name"],"sources":["src/components/gcds-top-nav/i18n/i18n.js","src/components/gcds-top-nav/gcds-top-nav.css?tag=gcds-top-nav&encapsulation=shadow","src/components/gcds-top-nav/gcds-top-nav.tsx"],"sourcesContent":["const I18N = {\n  en: {\n    closeTrigger: 'Close',\n    menuLabel: 'Menu',\n    navLabel:\n      ' - Use the enter key to select a menu item and travel to its page. Use the left and right arrow keys to navigate between menu and submenu items. Use the right arrow key to open submenus when they are available. Use the left arrow or escape keys to close a menu.',\n  },\n  fr: {\n    closeTrigger: 'Fermer',\n    menuLabel: 'Menu',\n    navLabel:\n      \" - Utiliser la touche d'entrée pour sélectionner un élément du menu et voyager à la page indiquée. Utiliser les flèches gauches et droites pour naviguer entre les éléments et les sous-éléments du menu. Ouvrir les sous-éléments du menu avec la flèche droite lorsqu'il sont disponible. Fermer le menu avec la flèche gauche ou la touche d'échappement.\",\n  },\n};\n\nexport default I18N;\n","@layer reset, default, desktop;\n\n@layer reset {\n  :host {\n    display: block;\n\n    * {\n      margin: 0;\n      box-sizing: border-box;\n    }\n\n    ul {\n      padding: 0;\n    }\n  }\n}\n\n@layer default {\n  :host .gcds-top-nav .gcds-top-nav__container {\n    display: flex;\n    flex-direction: column;\n    width: 90%;\n    max-width: var(--gcds-top-nav-max-width);\n    margin-inline: auto;\n  }\n}\n\n@layer desktop {\n  /* Note: viewport specific style decisions */\n  @media only screen and (width >= 64em) {\n    :host .gcds-top-nav {\n      border-block-end: var(--gcds-top-nav-border-width) solid\n        var(--gcds-top-nav-border-color);\n\n      .gcds-top-nav__container {\n        flex-direction: row;\n        align-items: flex-end;\n      }\n\n      .nav-container__list {\n        display: flex;\n        align-items: flex-end;\n        width: fit-content;\n\n        &.nav-list--right {\n          margin-inline-start: auto;\n        }\n\n        &.nav-list--center {\n          margin-inline: auto;\n        }\n      }\n    }\n  }\n}\n","import {\n  Component,\n  Element,\n  Host,\n  Prop,\n  State,\n  Listen,\n  Method,\n  h,\n} from '@stencil/core';\nimport { assignLanguage, observerConfig } from '../../utils/utils';\nimport { handleKeyDownNav, getNavItems } from '../../utils/menus/utils';\nimport I18N from './i18n/i18n';\n\n/**\n * A top navigation is a horizontal list of page links.\n *\n * @slot default - Slot for the navigation groups and navigation links.\n */\n@Component({\n  tag: 'gcds-top-nav',\n  styleUrl: 'gcds-top-nav.css',\n  shadow: true,\n})\nexport class GcdsTopNav {\n  @Element() el: HTMLElement;\n\n  private mobile?: HTMLGcdsNavGroupElement;\n\n  /**\n   * Label for navigation landmark\n   */\n  @Prop() label!: string;\n\n  /**\n   * Nav alignment\n   */\n  @Prop() alignment: 'left' | 'center' | 'right' = 'left';\n\n  /**\n   * Sticky navigation flag\n   */\n  // @Prop() position: 'static' | 'sticky' = 'static';\n\n  /**\n   * Language of rendered component\n   */\n  @State() lang: string;\n\n  /**\n   * Queue of nav items for keyboard navigation\n   */\n  @State() navItems = [];\n\n  /**\n   * Current size state based on widnow size\n   */\n  @State() navSize: 'desktop' | 'mobile';\n\n  @Listen('focusin', { target: 'document' })\n  async focusInListener(e) {\n    if (this.el.contains(e.target) && !this.navSize) {\n      const mediaQuery = window.matchMedia('screen and (min-width: 64em)');\n      const nav = this.el as HTMLGcdsTopNavElement;\n      const mobileTrigger = this.mobile;\n\n      if (mediaQuery.matches) {\n        this.navSize = 'desktop';\n      } else {\n        this.navSize = 'mobile';\n      }\n\n      await this.updateNavItemQueue(this.el);\n\n      mediaQuery.addEventListener('change', async function (e) {\n        if (e.matches) {\n          nav.updateNavSize('desktop');\n          await nav.updateNavItemQueue(nav);\n\n          if (mobileTrigger.hasAttribute('open')) {\n            mobileTrigger.toggleNav();\n            const childNavGroups = nav.querySelectorAll('gcds-nav-group');\n            childNavGroups.forEach(navGroup => {\n              if (navGroup.hasAttribute('open')) {\n                navGroup.toggleNav();\n              }\n            });\n          }\n        } else {\n          nav.updateNavSize('mobile');\n          const childNavGroups = nav.querySelectorAll('gcds-nav-group');\n          childNavGroups.forEach(navGroup => {\n            if (navGroup.hasAttribute('open')) {\n              navGroup.toggleNav();\n            }\n          });\n          await nav.updateNavItemQueue(nav);\n        }\n      });\n    }\n  }\n\n  @Listen('focusout', { target: 'document' })\n  async focusOutListener(e) {\n    if (e.relatedTarget !== null && e.relatedTarget !== this.el && !this.el.contains(e.relatedTarget)) {\n      if (this.navSize == 'mobile') {\n        if (this.mobile.hasAttribute('open')) {\n          await this.mobile.toggleNav();\n        }\n      }\n    }\n  }\n\n  @Listen('keydown', { target: 'document' })\n  async keyDownListener(e) {\n    if (this.el.contains(document.activeElement)) {\n      handleKeyDownNav(e, this.el, this.navItems);\n    } else if (this.navSize == 'mobile' && this.mobile.open == true && e.key == 'Escape') {\n      // Close mobile nav on ESC\n      await this.mobile.toggleNav();\n    }\n  }\n\n  @Listen('gcdsClick', { target: 'document' })\n  async gcdsClickListener(e) {\n    if (this.el.contains(e.target)) {\n      // Update tab queue when clicking mobile menu\n      if (e.target == this.el && this.navSize == 'mobile') {\n        await this.updateNavItemQueue(e.target);\n\n        // Update tab queue when clicking dropdown\n      } else if (\n        e.target.nodeName == 'GCDS-NAV-GROUP' &&\n        !e.target.hasAttribute('open')\n      ) {\n        await this.updateNavItemQueue(e.target, true);\n        (e.target as HTMLGcdsNavGroupElement).focusTrigger();\n      }\n    }\n  }\n\n  /*\n   * Observe lang attribute change\n   */\n  updateLang() {\n    const observer = new MutationObserver(mutations => {\n      if (mutations[0].oldValue != this.el.lang) {\n        this.lang = this.el.lang;\n      }\n    });\n    observer.observe(this.el, observerConfig);\n  }\n\n  /*\n   * Get current navSize state\n   */\n  @Method()\n  async getNavSize() {\n    return this.navSize;\n  }\n\n  /*\n   * Pass new window size: desktop or mobile\n   */\n  @Method()\n  async updateNavSize(size) {\n    this.navSize = size;\n  }\n\n  /*\n   * Update item queue for keyboard navigation based on passed element\n   */\n  @Method()\n  async updateNavItemQueue(el, includeElement?: boolean) {\n    if (includeElement) {\n      const childElements = await getNavItems(el);\n      this.navItems = [el, ...childElements];\n    } else {\n      this.navItems = await getNavItems(el);\n    }\n\n    if (el == this.el && this.navSize == 'mobile') {\n      this.navItems = [...this.navItems, this.mobile];\n    }\n  }\n\n  async componentWillLoad() {\n    // Define lang attribute\n    this.lang = assignLanguage(this.el);\n\n    this.updateLang();\n  }\n\n  render() {\n    const { label, alignment, lang } = this;\n\n    return (\n      <Host>\n        <div class=\"gcds-top-nav\">\n          <nav aria-label={`${label}${I18N[lang].navLabel}`}>\n            <ul class=\"gcds-top-nav__container\">\n              <gcds-nav-group\n                menuLabel={I18N[lang].menuLabel}\n                closeTrigger={I18N[lang].closeTrigger}\n                openTrigger={I18N[lang].menuLabel}\n                class=\"gcds-mobile-nav gcds-mobile-nav-topnav\"\n                ref={element =>\n                  (this.mobile = element as HTMLGcdsNavGroupElement)\n                }\n                lang={lang}\n              >\n                <slot name=\"home\"></slot>\n                <li class={`nav-container__list nav-list--${alignment}`}>\n                  <ul class={`nav-container__list nav-list--${alignment}`}>\n                    <slot></slot>\n                  </ul>\n                </li>\n              </gcds-nav-group>\n            </ul>\n          </nav>\n        </div>\n      </Host>\n    );\n  }\n}\n"],"mappings":"uNAAA,MAAMA,EAAO,CACXC,GAAI,CACFC,aAAc,QACdC,UAAW,OACXC,SACE,yQAEJC,GAAI,CACFH,aAAc,SACdC,UAAW,OACXC,SACE,iWCXN,MAAME,EAAgB,yxB,MCwBTC,EAAUC,EAAA,MAAAD,UAAAE,EALvB,WAAAC,G,oDAkBUC,KAASC,UAAgC,OAexCD,KAAQE,SAAG,EA4KrB,CApKC,qBAAMC,CAAgBC,GACpB,GAAIJ,KAAKK,GAAGC,SAASF,EAAEG,UAAYP,KAAKQ,QAAS,CAC/C,MAAMC,EAAaC,OAAOC,WAAW,gCACrC,MAAMC,EAAMZ,KAAKK,GACjB,MAAMQ,EAAgBb,KAAKc,OAE3B,GAAIL,EAAWM,QAAS,CACtBf,KAAKQ,QAAU,S,KACV,CACLR,KAAKQ,QAAU,Q,OAGXR,KAAKgB,mBAAmBhB,KAAKK,IAEnCI,EAAWQ,iBAAiB,UAAUC,eAAgBd,GACpD,GAAIA,EAAEW,QAAS,CACbH,EAAIO,cAAc,iBACZP,EAAII,mBAAmBJ,GAE7B,GAAIC,EAAcO,aAAa,QAAS,CACtCP,EAAcQ,YACd,MAAMC,EAAiBV,EAAIW,iBAAiB,kBAC5CD,EAAeE,SAAQC,IACrB,GAAIA,EAASL,aAAa,QAAS,CACjCK,EAASJ,W,UAIV,CACLT,EAAIO,cAAc,UAClB,MAAMG,EAAiBV,EAAIW,iBAAiB,kBAC5CD,EAAeE,SAAQC,IACrB,GAAIA,EAASL,aAAa,QAAS,CACjCK,EAASJ,W,WAGPT,EAAII,mBAAmBJ,E,CAEjC,G,EAKJ,sBAAMc,CAAiBtB,GACrB,GAAIA,EAAEuB,gBAAkB,MAAQvB,EAAEuB,gBAAkB3B,KAAKK,KAAOL,KAAKK,GAAGC,SAASF,EAAEuB,eAAgB,CACjG,GAAI3B,KAAKQ,SAAW,SAAU,CAC5B,GAAIR,KAAKc,OAAOM,aAAa,QAAS,OAC9BpB,KAAKc,OAAOO,W,IAO1B,qBAAMO,CAAgBxB,GACpB,GAAIJ,KAAKK,GAAGC,SAASuB,SAASC,eAAgB,CAC5CC,EAAiB3B,EAAGJ,KAAKK,GAAIL,KAAKE,S,MAC7B,GAAIF,KAAKQ,SAAW,UAAYR,KAAKc,OAAOkB,MAAQ,MAAQ5B,EAAE6B,KAAO,SAAU,OAE9EjC,KAAKc,OAAOO,W,EAKtB,uBAAMa,CAAkB9B,GACtB,GAAIJ,KAAKK,GAAGC,SAASF,EAAEG,QAAS,CAE9B,GAAIH,EAAEG,QAAUP,KAAKK,IAAML,KAAKQ,SAAW,SAAU,OAC7CR,KAAKgB,mBAAmBZ,EAAEG,O,MAG3B,GACLH,EAAEG,OAAO4B,UAAY,mBACpB/B,EAAEG,OAAOa,aAAa,QACvB,OACMpB,KAAKgB,mBAAmBZ,EAAEG,OAAQ,MACvCH,EAAEG,OAAmC6B,c,GAQ5C,UAAAC,GACE,MAAMC,EAAW,IAAIC,kBAAiBC,IACpC,GAAIA,EAAU,GAAGC,UAAYzC,KAAKK,GAAGqC,KAAM,CACzC1C,KAAK0C,KAAO1C,KAAKK,GAAGqC,I,KAGxBJ,EAASK,QAAQ3C,KAAKK,GAAIuC,E,CAO5B,gBAAMC,GACJ,OAAO7C,KAAKQ,O,CAOd,mBAAMW,CAAc2B,GAClB9C,KAAKQ,QAAUsC,C,CAOjB,wBAAM9B,CAAmBX,EAAI0C,GAC3B,GAAIA,EAAgB,CAClB,MAAMC,QAAsBC,EAAY5C,GACxCL,KAAKE,SAAW,CAACG,KAAO2C,E,KACnB,CACLhD,KAAKE,eAAiB+C,EAAY5C,E,CAGpC,GAAIA,GAAML,KAAKK,IAAML,KAAKQ,SAAW,SAAU,CAC7CR,KAAKE,SAAW,IAAIF,KAAKE,SAAUF,KAAKc,O,EAI5C,uBAAMoC,GAEJlD,KAAK0C,KAAOS,EAAenD,KAAKK,IAEhCL,KAAKqC,Y,CAGP,MAAAe,GACE,MAAMC,MAAEA,EAAKpD,UAAEA,EAASyC,KAAEA,GAAS1C,KAEnC,OACEsD,EAACC,EAAI,CAAAtB,IAAA,4CACHqB,EAAK,OAAArB,IAAA,2CAAAuB,MAAM,gBACTF,EAAiB,OAAArB,IAAA,2DAAGoB,IAAQhE,EAAKqD,GAAMjD,YACrC6D,EAAI,MAAArB,IAAA,2CAAAuB,MAAM,2BACRF,EACE,kBAAArB,IAAA,2CAAAzC,UAAWH,EAAKqD,GAAMlD,UACtBD,aAAcF,EAAKqD,GAAMnD,aACzBkE,YAAapE,EAAKqD,GAAMlD,UACxBgE,MAAM,yCACNE,IAAKC,GACF3D,KAAKc,OAAS6C,EAEjBjB,KAAMA,GAENY,EAAM,QAAArB,IAAA,2CAAA2B,KAAK,SACXN,EAAA,MAAArB,IAAA,2CAAIuB,MAAO,iCAAiCvD,KAC1CqD,EAAA,MAAArB,IAAA,2CAAIuB,MAAO,iCAAiCvD,KAC1CqD,EAAa,QAAArB,IAAA,mD","ignoreList":[]}