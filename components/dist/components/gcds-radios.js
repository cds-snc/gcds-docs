import{p as s,H as e,d as i,h as t,c as d}from"./p-CmJ5P5Sp.js";import{l as a,d as r,h as o,f as l,a as c,i as n}from"./p-BphlHDEW.js";import{d as h,g,r as b}from"./p-BwGU8uxz.js";import{d as u}from"./p-BEtRxdw6.js";import{d as f}from"./p-Bzu3iQQm.js";import{d as m}from"./p-Vne11OgD.js";import{d as p}from"./p-YKPQ_iRb.js";import{d as v}from"./p-B57Qz20G.js";function k(s){if(typeof s!=="object"||s===null)return false;const e=["id","label","value","hint","checked"];const i=Object.keys(s);const t=typeof s.id==="string"&&typeof s.label==="string"&&typeof s.value==="string"&&(s.hint===undefined||typeof s.hint==="string")&&(s.checked===undefined||typeof s.checked==="boolean");const d=i.every((s=>e.includes(s)));return t&&d}const y={en:{required:" (required)"},fr:{required:" (obligatoire)"}};const w='@layer reset, default, disabled, error, focus, a11y.highcontrast;@layer reset{:host{display:block}:host .gcds-radios__fieldset{border:0;min-inline-size:auto;padding:0}:host .gcds-radios__fieldset legend{padding:0}:host .gcds-radio{border:0;padding:0}:host .gcds-radio gcds-label{display:block}:host .gcds-radio gcds-label>label:after,:host .gcds-radio gcds-label>label:before{box-sizing:border-box;content:"";cursor:pointer;position:absolute}}@layer default{:host .gcds-radios__legend{font:var(--gcds-radio-legend-font-desktop);margin:var(--gcds-radio-legend-margin)}:host .gcds-radios__legend .legend__required{font:var(--gcds-radio-legend-required-font-desktop)}@media only screen and (width < 48em){:host .gcds-radios__legend{font:var(--gcds-radio-legend-font-mobile)}:host .gcds-radios__legend .legend__required{font:var(--gcds-radio-legend-required-font-mobile)}}:host .gcds-radios__legend:not(:has(+gcds-hint)){margin:var(--gcds-radio-legend-hint-margin)}:host gcds-hint:part(hint){margin:var(--gcds-radio-hint-margin)}:host .gcds-radio{color:var(--gcds-radio-default-text);font:var(--gcds-radio-font);margin:var(--gcds-radio-margin)!important;max-width:var(--gcds-radio-max-width);min-height:calc(var(--gcds-radio-input-height-and-width) - var(--gcds-radio-padding));padding:var(--gcds-radio-padding) 0 0;position:relative;transition:color .15s ease-in-out}:host .gcds-radio :is(gcds-label,gcds-hint){padding:var(--gcds-radio-label-padding)!important}:host .gcds-radio gcds-hint::part(hint){margin:0}:host .gcds-radio gcds-label:after,:host .gcds-radio gcds-label:before,:host .gcds-radio input{position:absolute}:host .gcds-radio gcds-label>label:before,:host .gcds-radio input{height:var(--gcds-radio-input-height-and-width);left:0;top:0;width:var(--gcds-radio-input-height-and-width)}:host .gcds-radio input{opacity:0}:host .gcds-radio gcds-label>label{width:fit-content;--gcds-label-font-desktop:var(--gcds-radio-label-font-desktop);--gcds-label-font-mobile:var(--gcds-radio-label-font-mobile)}:host .gcds-radio gcds-label>label:after,:host .gcds-radio gcds-label>label:before{border-radius:var(--gcds-radio-border-radius)}:host .gcds-radio gcds-label>label:before{background-color:var(--gcds-radio-default-background);border:var(--gcds-radio-input-border-width) solid;transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out,outline .15s ease-in-out}:host .gcds-radio gcds-label>label:after{background-color:currentcolor;height:var(--gcds-radio-check-height-and-width);left:var(--gcds-radio-check-left);opacity:0;top:var(--gcds-radio-check-top);width:var(--gcds-radio-check-height-and-width)}:host .gcds-radio input:checked+gcds-label>label:after{opacity:1}}@layer disabled{:host .gcds-radio.gcds-radio--disabled{color:var(--gcds-radio-disabled-text)}:host .gcds-radio.gcds-radio--disabled gcds-label>label{--gcds-label-text:currentColor;cursor:not-allowed}:host .gcds-radio.gcds-radio--disabled gcds-label>label:after,:host .gcds-radio.gcds-radio--disabled gcds-label>label:before{cursor:not-allowed}:host .gcds-radio.gcds-radio--disabled gcds-label>label:before{background-color:var(--gcds-radio-disabled-background);border-color:var(--gcds-radio-disabled-border)}:host .gcds-radio.gcds-radio--disabled gcds-hint{--gcds-hint-text:currentColor}}@layer error{:host gcds-error-message{margin:var(--gcds-radio-error-message-margin)}:host .gcds-radio.gcds-radio--error:not(:focus-within) gcds-label>label:before{border-color:var(--gcds-radio-danger-border)}:host .gcds-radio.gcds-radio--error:not(:focus-within) gcds-label>label:after{background-color:var(--gcds-radio-danger-border)}}@layer focus{:host .gcds-radio:focus-within input:focus+gcds-label>label:before{background:var(--gcds-radio-focus-background);box-shadow:var(--gcds-radio-focus-box-shadow);color:var(--gcds-radio-focus-color);outline:var(--gcds-radio-focus-outline-width) solid currentcolor;outline-offset:var(--gcds-radio-input-border-width)}:host .gcds-radio:focus-within input:focus+gcds-label>label:after{box-shadow:inset 0 0 2rem var(--gcds-radio-focus-color)}}@layer a11y.highcontrast{@media (prefers-color-scheme:light){:host .gcds-radio gcds-label>label:after{background-color:buttonText}}@media (prefers-color-scheme:dark){:host .gcds-radio gcds-label>label:after{background-color:buttonText}}}';const _=s(class s extends e{constructor(){super();this.__registerHost();this.__attachShadow();this.gcdsInput=i(this,"gcdsInput");this.gcdsChange=i(this,"gcdsChange");this.gcdsFocus=i(this,"gcdsFocus");this.gcdsBlur=i(this,"gcdsBlur");this.gcdsValid=i(this,"gcdsValid");this.gcdsError=i(this,"gcdsError");this.internals=this.attachInternals();this._validator=h;this.validateOn="blur";this.inheritedAttributes={};this.errors=[];this.onBlur=()=>{this.gcdsBlur.emit()};this.onBlurValidate=()=>{if(this.validateOn=="blur"){this.validate()}this.gcdsBlur.emit()};this.handleInput=(s,e)=>{const i=s.target&&s.target.value;this.value=i;this.internals.setFormValue(i?i:null,"checked");if(s.type==="change"){const e=new s.constructor(s.type,s);this.el.dispatchEvent(e)}e.emit(this.value)}}validateOptions(){let s=false;if(typeof this.options==="string"&&this.options.trim()!==""){try{this.options=JSON.parse(this.options)}catch(s){a("gcds-radios",["Invalid JSON string for options"]);this.options=null}}if(Array.isArray(this.options)){this.optionsArr=this.options}else{this.optionsArr=null}if(this.optionsArr&&this.optionsArr.length>1){s=this.optionsArr.some((s=>!k(s)))}else{s=true}if(this.optionsArr&&!this.value){this.optionsArr.forEach((s=>{if(s.checked==="true"||s.checked===true){this.value=s.value;this.internals.setFormValue(s.value,"checked")}}))}this.errors=r(this.errors,"options",this.optionsArr,s)}validateName(){this.errors=r(this.errors,"name",this.name)}validateLegend(){this.errors=r(this.errors,"legend",this.legend)}validateErrorMessage(){if(this.disabled){this.errorMessage=""}else{this.hasError=this.errorMessage?true:false}}validateValue(){if(this.optionsArr&&this.value!==null){let s=false;this.optionsArr.map((e=>{if(e.value==this.value){s=true}}));if(!s){this.value=null;this.internals.setFormValue(this.value)}}}validateValidator(){this._validator=g(this.validator)}async validate(){o(this.el,this._validator.validate(this.value),this.legend,this.gcdsError,this.gcdsValid,this.lang)}submitListener(s){if(s.target==this.el.closest("form")){if(this.validateOn&&this.validateOn!="other"){this.validate()}if(this.hasError&&this.validateOn!="other"){s.preventDefault()}}}formResetCallback(){if(this.value!=this.initialValue){this.internals.setFormValue(this.initialValue,"checked");this.value=this.initialValue}}formStateRestoreCallback(s){this.internals.setFormValue(s);this.value=s}watchLang(s,e){if(s!==e){this.lang=s}}validateRequiredProps(){this.validateLegend();this.validateName();return l(this.errors,["name","legend","options"])}async componentWillLoad(){this.lang=c(this.el);this.validateOptions();this.validateRequiredProps();this.validateErrorMessage();b(this.el,"radio");this.validateValidator();this.inheritedAttributes=n(this.el,this.shadowElement);this.initialValue=this.value?this.value:null;const s=this.validateRequiredProps();if(!s){a("gcds-radios",this.errors)}}async componentDidUpdate(){const s=this.validateRequiredProps();if(!s){a("gcds-radios",this.errors)}}render(){const{lang:s,name:e,legend:i,value:a,required:r,hint:o,errorMessage:l,disabled:c,hasError:n,inheritedAttributes:h}=this;const g={tabindex:"-1","aria-labelledby":"radios-legend"};if(o){const s=this.hint?`radios-hint `:"";g["aria-labelledby"]=`${g["aria-labelledby"]} ${s}`.trim()}if(this.validateRequiredProps()){return t(d,{key:"b297d3c141ccff67ca0fc640f09df5c7aaf55f44",onBlur:()=>this.onBlurValidate()},t("fieldset",Object.assign({key:"0552575a6581cbd91466972385db38bd20464a01",class:"gcds-radios__fieldset"},g),t("legend",{key:"d2a7e52a83a83d45db33bc90d64d5237e3269ebe",id:"radios-legend",class:"gcds-radios__legend"},i,r?t("span",{class:"legend__required"},y[s].required):null),o?t("gcds-hint",{id:"radios-hint","hint-id":"radios"},o):null,l?t("div",null,t("gcds-error-message",{id:"radios-error",messageId:"radios"},l)):null,this.optionsArr&&this.optionsArr.map((i=>{const d=Object.assign({name:e,disabled:c,required:r,value:i.value,checked:i.value===a},h);if(i.hint){const s=i.hint?`hint-${i.id} `:"";d["aria-describedby"]=`${s}${d["aria-describedby"]?`${d["aria-describedby"]}`:""}`}if(n){d["aria-invalid"]="true";d["aria-description"]=l}return t("div",{class:`gcds-radio ${c?"gcds-radio--disabled":""} ${n?"gcds-radio--error":""}`},t("input",Object.assign({id:i.id,type:"radio"},d,{onInput:s=>this.handleInput(s,this.gcdsInput),onChange:s=>this.handleInput(s,this.gcdsChange),onBlur:()=>this.onBlur(),onFocus:()=>this.gcdsFocus.emit()})),t("gcds-label",{label:i.label,"label-for":i.id,lang:s,onClick:s=>s.stopPropagation()}),i.hint?t("gcds-hint",{"hint-id":i.id},i.hint):null)}))))}}static get delegatesFocus(){return true}static get formAssociated(){return true}get el(){return this}static get watchers(){return{options:["validateOptions"],name:["validateName"],legend:["validateLegend"],errorMessage:["validateErrorMessage"],value:["validateValue"],validator:["validateValidator"],lang:["watchLang"]}}static get style(){return w}},[81,"gcds-radios",{options:[1025],name:[513],legend:[513],required:[516],hint:[513],errorMessage:[1025,"error-message"],disabled:[1540],value:[1537],validator:[1040],validateOn:[1025,"validate-on"],hasError:[32],inheritedAttributes:[32],lang:[32],errors:[32],validate:[64]},[[4,"submit","submitListener"]],{options:["validateOptions"],name:["validateName"],legend:["validateLegend"],errorMessage:["validateErrorMessage"],value:["validateValue"],validator:["validateValidator"],lang:["watchLang"]}]);function x(){if(typeof customElements==="undefined"){return}const s=["gcds-radios","gcds-error-message","gcds-hint","gcds-icon","gcds-label","gcds-text"];s.forEach((s=>{switch(s){case"gcds-radios":if(!customElements.get(s)){customElements.define(s,_)}break;case"gcds-error-message":if(!customElements.get(s)){u()}break;case"gcds-hint":if(!customElements.get(s)){f()}break;case"gcds-icon":if(!customElements.get(s)){m()}break;case"gcds-label":if(!customElements.get(s)){p()}break;case"gcds-text":if(!customElements.get(s)){v()}break}}))}const E=_;const j=x;export{E as GcdsRadios,j as defineCustomElement};
//# sourceMappingURL=gcds-radios.js.map