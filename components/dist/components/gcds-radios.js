import{p as s,H as i,c as e,h as t,F as a,d}from"./p-BQgY5XdM.js";import{l as r,b as o,h as l,v as c,j as n,a as h}from"./p-DOKR5HKI.js";import{d as g,g as u,r as b}from"./p-1b8Kykha.js";import{d as f}from"./p-9ylu2Rg-.js";import{d as m}from"./p-D0pOKwNu.js";import{d as p}from"./p-CwNv12Ch.js";import{d as v}from"./p-Cc9yC5rG.js";import{d as y}from"./p-l4qjNkyj.js";import{d as k}from"./p-DA0OyRaS.js";function w(s){if(typeof s!=="object"||s===null)return false;const i=["id","label","value","hint","checked"];const e=Object.keys(s);const t=typeof s.id==="string"&&typeof s.label==="string"&&typeof s.value==="string"&&(s.hint===undefined||typeof s.hint==="string")&&(s.checked===undefined||typeof s.checked==="boolean");const a=e.every((s=>i.includes(s)));return t&&a}const _={en:{required:" (required)"},fr:{required:" (obligatoire)"}};const x='@layer reset, default, disabled, error, focus, a11y.highcontrast;@layer reset{:host{display:block}:host .gcds-radios__fieldset{border:0;min-inline-size:auto;padding:0}:host .gcds-radios__fieldset legend{padding:0}:host .gcds-radio{border:0;padding:0}:host .gcds-radio gcds-label{display:block}:host .gcds-radio gcds-label>label:after,:host .gcds-radio gcds-label>label:before{box-sizing:border-box;content:"";cursor:pointer;position:absolute}}@layer default{:host .gcds-radios__legend{font:var(--gcds-radio-legend-font-desktop);margin:var(--gcds-radio-legend-margin)}:host .gcds-radios__legend .legend__required{font:var(--gcds-radio-legend-required-font-desktop)}@media only screen and (width < 48em){:host .gcds-radios__legend{font:var(--gcds-radio-legend-font-mobile)}:host .gcds-radios__legend .legend__required{font:var(--gcds-radio-legend-required-font-mobile)}}:host .gcds-radios__legend:not(:has(+gcds-hint)){margin:var(--gcds-radio-legend-hint-margin)}:host gcds-hint:part(hint){margin:var(--gcds-radio-hint-margin)}:host .gcds-radio{color:var(--gcds-radio-default-text);font:var(--gcds-radio-font);margin:var(--gcds-radio-margin)!important;max-width:var(--gcds-radio-max-width);min-height:calc(var(--gcds-radio-input-height-and-width) - var(--gcds-radio-padding));padding:var(--gcds-radio-padding) 0 0;position:relative;transition:color .15s ease-in-out}:host .gcds-radio :is(gcds-label,gcds-hint){padding:var(--gcds-radio-label-padding)!important}:host .gcds-radio gcds-hint::part(hint){margin:0}:host .gcds-radio gcds-label:after,:host .gcds-radio gcds-label:before,:host .gcds-radio input{position:absolute}:host .gcds-radio gcds-label>label:before,:host .gcds-radio input{height:var(--gcds-radio-input-height-and-width);left:0;top:0;width:var(--gcds-radio-input-height-and-width)}:host .gcds-radio input{opacity:0}:host .gcds-radio gcds-label>label{width:fit-content;--gcds-label-font-desktop:var(--gcds-radio-label-font-desktop);--gcds-label-font-mobile:var(--gcds-radio-label-font-mobile)}:host .gcds-radio gcds-label>label:after,:host .gcds-radio gcds-label>label:before{border-radius:var(--gcds-radio-border-radius)}:host .gcds-radio gcds-label>label:before{background-color:var(--gcds-radio-default-background);border:var(--gcds-radio-input-border-width) solid;transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out,outline .15s ease-in-out}:host .gcds-radio gcds-label>label:after{background-color:currentcolor;height:var(--gcds-radio-check-height-and-width);left:var(--gcds-radio-check-left);opacity:0;top:var(--gcds-radio-check-top);width:var(--gcds-radio-check-height-and-width)}:host .gcds-radio input:checked+gcds-label>label:after{opacity:1}}@layer disabled{:host .gcds-radio.gcds-radio--disabled{color:var(--gcds-radio-disabled-text)}:host .gcds-radio.gcds-radio--disabled gcds-label>label{--gcds-label-text:currentColor;cursor:not-allowed}:host .gcds-radio.gcds-radio--disabled gcds-label>label:after,:host .gcds-radio.gcds-radio--disabled gcds-label>label:before{cursor:not-allowed}:host .gcds-radio.gcds-radio--disabled gcds-label>label:before{background-color:var(--gcds-radio-disabled-background);border-color:var(--gcds-radio-disabled-border)}:host .gcds-radio.gcds-radio--disabled gcds-hint{--gcds-hint-text:currentColor}}@layer error{:host gcds-error-message{margin:var(--gcds-radio-error-message-margin)}:host .gcds-radio.gcds-radio--error:not(:focus-within) gcds-label>label:before{border-color:var(--gcds-radio-danger-border)}:host .gcds-radio.gcds-radio--error:not(:focus-within) gcds-label>label:after{background-color:var(--gcds-radio-danger-border)}}@layer focus{:host .gcds-radio:focus-within input:focus+gcds-label>label:before{background:var(--gcds-radio-focus-background);box-shadow:var(--gcds-radio-focus-box-shadow);color:var(--gcds-radio-focus-color);outline:var(--gcds-radio-focus-outline-width) solid currentcolor;outline-offset:var(--gcds-radio-input-border-width)}:host .gcds-radio:focus-within input:focus+gcds-label>label:after{box-shadow:inset 0 0 2rem var(--gcds-radio-focus-color)}}@layer a11y.highcontrast{@media (prefers-color-scheme:light){:host .gcds-radio gcds-label>label:after{background-color:buttonText}}@media (prefers-color-scheme:dark){:host .gcds-radio gcds-label>label:after{background-color:buttonText}}}';const j=s(class s extends i{constructor(){super();this.__registerHost();this.__attachShadow();this.gcdsInput=e(this,"gcdsInput");this.gcdsChange=e(this,"gcdsChange");this.gcdsFocus=e(this,"gcdsFocus");this.gcdsBlur=e(this,"gcdsBlur");this.gcdsValid=e(this,"gcdsValid");this.gcdsError=e(this,"gcdsError");this.internals=this.attachInternals();this.radioTitle="";this._validator=g;this.validateOn="blur";this.hideLegend=false;this.inheritedAttributes={};this.errors=[];this.onBlur=()=>{this.gcdsBlur.emit()};this.onBlurValidate=()=>{if(this.validateOn=="blur"){this.validate()}this.gcdsBlur.emit()};this.handleInput=(s,i)=>{const e=s.target&&s.target.value;this.value=e;this.internals.setFormValue(e?e:null,"checked");if(s.type==="change"){const i=new s.constructor(s.type,s);this.el.dispatchEvent(i)}else{this.updateValidity()}i.emit(this.value)}}validateOptions(){let s=false;if(typeof this.options==="string"&&this.options.trim()!==""){try{this.options=JSON.parse(this.options)}catch(s){r("gcds-radios",["Invalid JSON string for options"]);this.options=null}}if(Array.isArray(this.options)){this.optionsArr=this.options}else{this.optionsArr=null}if(this.optionsArr&&this.optionsArr.length>1){s=this.optionsArr.some((s=>!w(s)))}else{s=true}if(this.optionsArr&&!this.value){this.optionsArr.forEach((s=>{if(s.checked==="true"||s.checked===true){this.value=s.value;this.internals.setFormValue(s.value,"checked")}}))}this.errors=o(this.errors,"options",this.optionsArr,s)}validateName(){this.errors=o(this.errors,"name",this.name)}validateLegend(){this.errors=o(this.errors,"legend",this.legend)}validateErrorMessage(){if(this.disabled){this.errorMessage=""}else{this.hasError=this.errorMessage?true:false}}validateValue(){if(this.optionsArr&&this.value!==null){let s=false;this.optionsArr.map((i=>{if(i.value==this.value){s=true}}));if(!s){this.value=null;this.internals.setFormValue(this.value)}this.updateValidity()}}get validity(){return this.internals.validity}validateValidator(){this._validator=u(this.validator)}async validate(){l(this.el,this._validator.validate(this.value),this.legend,this.gcdsError,this.gcdsValid,this.lang);this.radioTitle=this.errorMessage}async checkValidity(){return this.internals.checkValidity()}async getValidationMessage(){return this.internals.validationMessage}submitListener(s){if(s.target==this.el.closest("form")){if(this.validateOn&&this.validateOn!="other"){this.validate()}if(this.hasError&&this.validateOn!="other"){s.preventDefault()}}}formResetCallback(){if(this.value!=this.initialValue){this.internals.setFormValue(this.initialValue,"checked");this.value=this.initialValue}}formStateRestoreCallback(s){this.internals.setFormValue(s);this.value=s}updateValidity(){var s;if(((s=this.shadowElement)===null||s===void 0?void 0:s.length)>1){const s=c(this.shadowElement);let i=null;if(s===null||s===void 0?void 0:s.valueMissing){i=this.lang==="en"?"Choose an option to continue.":"Choisissez une option pour continuer."}this.internals.setValidity(s,i,this.shadowElement[0]);this.radioTitle=i}}watchLang(s,i){if(s!==i){this.lang=s}}validateRequiredProps(){this.validateLegend();this.validateName();return n(this.errors,["name","legend","options"])}async componentWillLoad(){this.lang=h(this.el);this.validateOptions();this.validateRequiredProps();this.validateErrorMessage();b(this.el,"radio");this.validateValidator();this.initialValue=this.value?this.value:null;const s=this.validateRequiredProps();if(!s){r("gcds-radios",this.errors)}}async componentDidUpdate(){const s=this.validateRequiredProps();if(!s){r("gcds-radios",this.errors)}}async componentDidLoad(){this.updateValidity();if(this.autofocus){requestAnimationFrame((()=>{this.shadowElement[0].focus()}))}}render(){const{lang:s,name:i,legend:e,value:r,required:o,hint:l,errorMessage:c,disabled:n,hasError:h,radioTitle:g,form:u,inheritedAttributes:b}=this;const f={tabindex:"-1","aria-labelledby":"radios-legend"};if(l){const s=this.hint?`radios-hint `:"";f["aria-labelledby"]=`${f["aria-labelledby"]} ${s}`.trim()}if(this.validateRequiredProps()){return t(d,{key:"3bd16e4a6cc77fc6114f37791a4342baef496716",onBlur:()=>this.onBlurValidate()},t("fieldset",Object.assign({key:"8c91df0fae62ebcae079551bc5362e1770d2da23",class:"gcds-radios__fieldset"},f),t("legend",{key:"7372c1addc1d1c715b58ca0dd3dcc75fc6c38be4",id:"radios-legend",class:"gcds-radios__legend"},this.hideLegend?t("gcds-sr-only",{tag:"span"},e,o&&t("span",{class:"legend__required"},_[s].required)):t(a,null,e,o&&t("span",{class:"legend__required"},_[s].required))),l?t("gcds-hint",{id:"radios-hint","hint-id":"radios"},l):null,c?t("gcds-error-message",{id:"radios-error",messageId:"radios"},c):null,this.optionsArr&&this.optionsArr.map((e=>{const a=Object.assign({name:i,disabled:n,required:o,value:e.value,checked:e.value===r,title:g,form:u},b);if(e.hint){const s=e.hint?`hint-${e.id} `:"";a["aria-describedby"]=`${s}${a["aria-describedby"]?`${a["aria-describedby"]}`:""}`}if(h){a["aria-invalid"]="true";a["aria-description"]=c}return t("div",{class:`gcds-radio ${n?"gcds-radio--disabled":""} ${h?"gcds-radio--error":""}`},t("input",Object.assign({id:e.id,type:"radio"},a,{onInput:s=>this.handleInput(s,this.gcdsInput),onChange:s=>this.handleInput(s,this.gcdsChange),onBlur:()=>this.onBlur(),onFocus:()=>this.gcdsFocus.emit(),ref:s=>this.shadowElement=[...this.shadowElement||[],s]})),t("gcds-label",{label:e.label,"label-for":e.id,lang:s,onClick:s=>s.stopPropagation()}),e.hint?t("gcds-hint",{"hint-id":e.id},e.hint):null)}))))}}static get delegatesFocus(){return true}static get formAssociated(){return true}get el(){return this}static get watchers(){return{options:["validateOptions"],name:["validateName"],legend:["validateLegend"],errorMessage:["validateErrorMessage"],value:["validateValue"],validator:["validateValidator"],lang:["watchLang"]}}static get style(){return x}},[81,"gcds-radios",{options:[1025],name:[513],autofocus:[516],form:[513],legend:[513],required:[516],hint:[513],errorMessage:[1025,"error-message"],disabled:[1540],value:[1537],validity:[2064],validator:[1040],validateOn:[1025,"validate-on"],hideLegend:[4,"hide-legend"],hasError:[32],inheritedAttributes:[32],lang:[32],errors:[32],validate:[64],checkValidity:[64],getValidationMessage:[64]},[[4,"submit","submitListener"]],{options:["validateOptions"],name:["validateName"],legend:["validateLegend"],errorMessage:["validateErrorMessage"],value:["validateValue"],validator:["validateValidator"],lang:["watchLang"]}]);function q(){if(typeof customElements==="undefined"){return}const s=["gcds-radios","gcds-error-message","gcds-hint","gcds-icon","gcds-label","gcds-sr-only","gcds-text"];s.forEach((s=>{switch(s){case"gcds-radios":if(!customElements.get(s)){customElements.define(s,j)}break;case"gcds-error-message":if(!customElements.get(s)){f()}break;case"gcds-hint":if(!customElements.get(s)){m()}break;case"gcds-icon":if(!customElements.get(s)){p()}break;case"gcds-label":if(!customElements.get(s)){v()}break;case"gcds-sr-only":if(!customElements.get(s)){y()}break;case"gcds-text":if(!customElements.get(s)){k()}break}}))}const E=j;const C=q;export{E as GcdsRadios,C as defineCustomElement};
//# sourceMappingURL=gcds-radios.js.map