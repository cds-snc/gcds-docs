{"version":3,"names":["I18N","en","button","remove","upload","summary","selected","unselected","removeFile","droppedError","fr","gcdsFileUploaderCss","GcdsFileUploader","__stencil_proxyCustomElement","HTMLElement","constructor","this","inputTitle","_validator","defaultValidator","hideLabel","required","disabled","value","validateOn","inheritedAttributes","onBlur","validate","gcdsBlur","emit","handleInput","e","customEvent","filesContainer","files","Array","from","target","map","file","push","addFilesToFormData","setTimeout","type","changeEvt","el","dispatchEvent","updateValidity","preventDefault","fileName","closest","childNodes","textContent","indexOf","splice","dt","DataTransfer","f","shadowElement","length","name","items","add","gcdsRemoveFile","gcdsChange","Event","bubbles","composed","formData","FormData","forEach","append","internals","setFormValue","validateDisabledSelect","watchFiles","validateErrorMessage","errorMessage","hasError","validateValidator","getValidator","validator","validateHasError","validity","handleValidationResult","label","gcdsError","gcdsValid","lang","checkValidity","getValidationMessage","validationMessage","submitListener","formResetCallback","formStateRestoreCallback","state","valueMissing","setValidity","handleDrop","droppedFiles","dataTransfer","focus","updateLang","observer","MutationObserver","mutations","oldValue","observe","observerConfig","componentWillLoad","assignLanguage","requiredValidator","inheritAttributes","componentDidLoad","autofocus","requestAnimationFrame","_a","render","accept","hint","multiple","uploaderId","form","attrsInput","Object","assign","title","attrsLabel","hintID","errorID","h","Host","key","class","messageId","onDrop","onDragOver","tabindex","onClick","click","i18n","id","onFocus","gcdsFocus","onInput","gcdsInput","onChange","ref","element","size"],"sources":["src/components/gcds-file-uploader/i18n/i18n.js","src/components/gcds-file-uploader/gcds-file-uploader.css?tag=gcds-file-uploader&encapsulation=shadow","src/components/gcds-file-uploader/gcds-file-uploader.tsx"],"sourcesContent":["const I18N = {\n  en: {\n    button: {\n      remove: 'Remove',\n      upload: 'Choose file',\n    },\n    summary: {\n      selected: 'Currently selected:',\n      unselected: 'No file currently selected.',\n    },\n    removeFile: 'Remove file',\n    droppedError:\n      'One or more of the dropped files is unable to be uploaded. Accepted file types:',\n  },\n  fr: {\n    button: {\n      remove: 'Supprimer',\n      upload: 'Choisir un fichier',\n    },\n    summary: {\n      selected: 'Actuellement sélectionné:',\n      unselected: 'Aucun fichier actuellement sélectionné.',\n    },\n    removeFile: 'Supprimer le fichier',\n    droppedError:\n      'Un ou plusieurs fichiers déposés ne peuvent pas être téléversés. Types de fichiers acceptés :',\n  },\n};\n\nexport default I18N;\n","@layer reset, default, input, files, disabled, error, focus, active;\n\n@layer reset {\n  :host {\n    display: block;\n\n    .gcds-file-uploader-wrapper {\n      margin: 0;\n      padding: 0;\n      border: 0;\n\n      button {\n        font: inherit;\n        outline: 0;\n        cursor: pointer;\n      }\n    }\n  }\n}\n\n@layer default {\n  :host .gcds-file-uploader-wrapper {\n    display: flex;\n    flex-direction: column;\n    align-items: flex-start;\n    max-width: 90%;\n    font: var(--gcds-file-uploader-font-desktop);\n    color: var(--gcds-file-uploader-default-text);\n    transition: color ease-in-out 0.15s;\n\n    @media only screen and (width < 48em) {\n      font: var(--gcds-file-uploader-font-mobile);\n    }\n\n    button {\n      border-radius: var(--gcds-file-uploader-file-button-border-radius);\n      transition: all 0.15s ease-in-out;\n    }\n  }\n}\n\n@layer input {\n  :host .gcds-file-uploader-wrapper .file-uploader__input {\n    position: relative;\n    display: inline-block;\n\n    button {\n      font-weight: var(--gcds-file-uploader-button-font-weight);\n      margin: var(--gcds-file-uploader-button-margin);\n      padding: var(--gcds-file-uploader-button-padding);\n      background-color: var(--gcds-file-uploader-button-background);\n      color: var(--gcds-file-uploader-button-text);\n      border: var(--gcds-file-uploader-button-border-width) solid\n        var(--gcds-file-uploader-button-text);\n    }\n\n    input {\n      position: absolute;\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: 100%;\n      opacity: 0;\n      cursor: pointer;\n\n      &::-webkit-file-upload-button {\n        cursor: pointer;\n      }\n    }\n\n    #file-uploader__summary {\n      visibility: hidden;\n      height: 0;\n      margin: 0;\n      overflow: hidden;\n    }\n  }\n}\n\n@layer files {\n  :host .gcds-file-uploader-wrapper .file-uploader__uploaded-file {\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    width: 100%;\n    max-width: var(--gcds-file-uploader-file-max-width);\n    padding: var(--gcds-file-uploader-file-padding);\n    border: var(--gcds-file-uploader-file-border-width) solid\n      var(--gcds-file-uploader-file-border-color);\n\n    &:not(:last-of-type) {\n      border-block-end: 0;\n    }\n\n    &:last-of-type {\n      margin: var(--gcds-file-uploader-button-margin);\n    }\n\n    gcds-text {\n      overflow: auto;\n\n      &::part(text) {\n        white-space: nowrap;\n        overflow: hidden;\n        text-overflow: ellipsis;\n      }\n    }\n\n    button {\n      display: flex;\n      align-items: center;\n      background: transparent;\n      border: 0;\n      color: var(--gcds-file-uploader-file-button-default-text);\n      font-weight: var(--gcds-file-uploader-button-font-weight);\n      margin: var(--gcds-file-uploader-file-button-margin);\n      padding: var(--gcds-file-uploader-file-button-padding);\n\n      &:not(:focus) span {\n        overflow: visible;\n        text-decoration: underline\n          var(--gcds-file-uploader-file-button-default-decoration-thickness);\n        text-underline-offset: var(\n          --gcds-file-uploader-file-button-underline-offset\n        );\n      }\n    }\n  }\n}\n\n@layer disabled {\n  :host .gcds-file-uploader-wrapper.gcds-disabled {\n    color: var(--gcds-file-uploader-disabled-text);\n\n    gcds-label {\n      --gcds-label-text: currentColor;\n    }\n\n    gcds-hint {\n      --gcds-hint-text: currentColor;\n    }\n\n    :is(.file-uploader__input, .file-uploader__uploaded-file) {\n      pointer-events: none;\n    }\n\n    .file-uploader__input button,\n    .file-uploader__uploaded-file,\n    .file-uploader__uploaded-file button {\n      color: inherit;\n    }\n\n    .file-uploader__input button {\n      background-color: var(--gcds-file-uploader-disabled-background);\n      border-color: currentColor;\n    }\n  }\n}\n\n@layer error {\n  :host .gcds-file-uploader-wrapper.gcds-error .file-uploader__uploaded-file {\n    border-color: var(--gcds-file-uploader-file-danger-border-color);\n  }\n}\n\n@layer hover {\n  @media (hover: hover) {\n    :host .gcds-file-uploader-wrapper {\n      .file-uploader__input:not(:focus-within):hover button {\n        background-color: var(--gcds-file-uploader-hover-button-background);\n      }\n\n      .file-uploader__uploaded-file button:not(:focus):hover {\n        color: var(--gcds-file-uploader-file-button-hover-text);\n\n        span {\n          text-decoration-thickness: var(\n            --gcds-file-uploader-file-button-hover-decoration-thickness\n          );\n        }\n      }\n    }\n  }\n}\n\n@layer focus {\n  :host .gcds-file-uploader-wrapper:focus-within {\n    .file-uploader__uploaded-file:focus-within {\n      border-color: var(--gcds-file-uploader-file-focus-border-color);\n    }\n\n    .file-uploader__input:focus-within button,\n    .file-uploader__uploaded-file button:focus {\n      background-color: var(--gcds-file-uploader-focus-button-background);\n      color: var(--gcds-file-uploader-focus-button-text);\n      outline: var(--gcds-file-uploader-button-outline-width) solid\n        var(--gcds-file-uploader-focus-button-background);\n      outline-offset: var(--gcds-file-uploader-focus-button-outline-offset);\n      border-color: var(--gcds-file-uploader-focus-button-background);\n    }\n  }\n}\n\n@layer active {\n  :host .gcds-file-uploader-wrapper {\n    .file-uploader__input:has(input:active) button {\n      background-color: var(--gcds-file-uploader-active-button-background);\n      color: var(--gcds-file-uploader-active-button-text);\n      border-color: var(--gcds-file-uploader-active-button-background);\n    }\n  }\n}\n","import {\n  Component,\n  Element,\n  Event as StencilEvent,\n  EventEmitter,\n  Prop,\n  Watch,\n  State,\n  Method,\n  Host,\n  h,\n  Listen,\n  AttachInternals,\n} from '@stencil/core';\nimport {\n  assignLanguage,\n  handleValidationResult,\n  inheritAttributes,\n  observerConfig\n} from '../../utils/utils';\nimport {\n  Validator,\n  defaultValidator,\n  ValidatorEntry,\n  getValidator,\n  requiredValidator,\n} from '../../validators';\nimport i18n from './i18n/i18n';\n\n/**\n * A file uploader is a space to select and add supporting documentation.\n */\n@Component({\n  tag: 'gcds-file-uploader',\n  styleUrl: 'gcds-file-uploader.css',\n  shadow: { delegatesFocus: true },\n  formAssociated: true,\n})\nexport class GcdsFileUploader {\n  @Element() el: HTMLElement;\n\n  @AttachInternals()\n  internals: ElementInternals;\n\n  private shadowElement?: HTMLInputElement;\n\n  private inputTitle: string = '';\n\n  _validator: Validator<unknown> = defaultValidator;\n\n  /**\n   * Props\n   */\n\n  /**\n   * Id attribute for a file uploader element.\n   */\n  @Prop({ reflect: true, mutable: true }) uploaderId!: string;\n\n  /**\n   * Name attribute for file input element.\n   */\n  @Prop() name!: string;\n\n  /**\n   * Form field label.\n   */\n  @Prop({ reflect: true, mutable: false }) label!: string;\n\n  /**\n   * Specifies if the label is hidden or not.\n   */\n  @Prop() hideLabel?: boolean = false;\n\n  /**\n   * Specifies if a form field is required or not.\n   */\n  @Prop({ reflect: true, mutable: false }) required: boolean = false;\n\n  /**\n   * Specifies if a file uploader element is disabled or not.\n   */\n  @Prop({ reflect: true, mutable: true }) disabled: boolean = false;\n\n  @Watch('disabled')\n  validateDisabledSelect() {\n    if (this.required) {\n      this.disabled = false;\n    }\n  }\n\n  /**\n   * Value for a file uploader element.\n   */\n  @Prop({ reflect: true, mutable: true }) value: string[] = [];\n\n  /**\n   * Defines the file types the file uploader accepts.\n   */\n  @Prop({ reflect: true, mutable: false }) accept: string;\n\n  /**\n   * Boolean that specifies if the user is allowed to select more than one file.\n   */\n  @Prop({ reflect: true, mutable: false }) multiple: boolean;\n\n  /**\n   * FileList of uploaded files to input\n   */\n  @Prop({ mutable: true }) files: FileList;\n  @Watch('files')\n  watchFiles() {\n    const filesContainer: string[] = [];\n    const files = Array.from(this.files);\n\n    files.map(file => {\n      filesContainer.push(file['name']);\n    });\n\n    this.addFilesToFormData(files);\n    this.value = [...filesContainer];\n  }\n\n  /**\n   * Error message for an invalid file uploader element.\n   */\n  @Prop({ reflect: true, mutable: true }) errorMessage: string;\n  @Watch('errorMessage')\n  validateErrorMessage() {\n    if (this.disabled) {\n      this.errorMessage = '';\n    } else if (!this.hasError && this.errorMessage) {\n      this.hasError = true;\n    } else if (this.errorMessage == '') {\n      this.hasError = false;\n    }\n  }\n\n  /**\n   * Hint displayed below the label.\n   */\n  @Prop({ reflect: true, mutable: false }) hint: string;\n\n  /**\n   * Array of validators\n   */\n  @Prop({ mutable: true }) validator: Array<\n    string | ValidatorEntry | Validator<string | number | FileList>\n  >;\n\n  @Watch('validator')\n  validateValidator() {\n    this._validator = getValidator(this.validator);\n  }\n\n  /**\n   * Set event to call validator\n   */\n  @Prop({ mutable: true }) validateOn: 'blur' | 'submit' | 'other' = 'blur';\n\n  /**\n   * Specifies if the file uploader is invalid.\n   */\n  @State() hasError: boolean;\n  @Watch('hasError')\n  validateHasError() {\n    if (this.disabled) {\n      this.hasError = false;\n    }\n  }\n\n  /**\n   * Read-only property of the file uploader, returns a ValidityState object that represents the validity states this element is in.\n   */\n  @Prop()\n  get validity() {\n    return this.internals.validity;\n  }\n\n  /**\n   * If true, the file uploader will be focused on component render\n   */\n  @Prop({ reflect: true }) autofocus: boolean;\n\n  /**\n   * The ID of the form that the file uploader field belongs to.\n   */\n  @Prop({ reflect: true }) form?: string;\n\n  /**\n   * Set additional HTML attributes not available in component properties\n   */\n  @State() inheritedAttributes: Object = {};\n\n  /**\n   * Language of rendered component\n   */\n  @State() lang: string;\n\n  /**\n   * Events\n   */\n\n  /**\n   * Emitted when the uploader has focus.\n   */\n  @StencilEvent() gcdsFocus!: EventEmitter<void>;\n\n  /**\n   * Emitted when the uploader loses focus.\n   */\n  @StencilEvent() gcdsBlur!: EventEmitter<void>;\n\n  private onBlur = () => {\n    if (this.validateOn == 'blur') {\n      this.validate();\n    }\n\n    this.gcdsBlur.emit();\n  };\n\n  /**\n   * Emitted when the user has made a file selection. Contains the new value in the event detail.\n   */\n  @StencilEvent() gcdsChange: EventEmitter<string[]>;\n\n  /**\n   * Emitted when the user has uploaded a file. Contains the new value in the event detail.\n   */\n  @StencilEvent() gcdsInput: EventEmitter<string[]>;\n\n  private handleInput = (e, customEvent) => {\n    const filesContainer: string[] = [];\n    const files = Array.from(e.target.files);\n    this.files = e.target.files;\n\n    files.map(file => {\n      filesContainer.push(file['name']);\n    });\n\n    this.addFilesToFormData(files);\n\n    this.value = [...filesContainer];\n\n    // Validate since the input loses focus when dialog opens\n    if (this.validateOn == 'blur') {\n      setTimeout(() => {\n        this.validate();\n      }, 100);\n    }\n\n    if (e.type === 'change') {\n      const changeEvt = new e.constructor(e.type, e);\n      this.el.dispatchEvent(changeEvt);\n    } else {\n      this.updateValidity();\n    }\n\n    customEvent.emit(this.value);\n  };\n\n  /**\n   * Remove file and update value.\n   */\n  @StencilEvent() gcdsRemoveFile: EventEmitter;\n  removeFile = e => {\n    e.preventDefault();\n    const fileName = e.target.closest('.file-uploader__uploaded-file')\n      .childNodes[0].textContent;\n\n    const filesContainer = this.value;\n    const file = filesContainer.indexOf(fileName);\n\n    if (file > -1) {\n      filesContainer.splice(file, 1);\n\n      // Add additional logic to remove file from input\n      const dt = new DataTransfer();\n      for (let f = 0; f < this.shadowElement.files.length; f++) {\n        if (this.shadowElement.files[f].name != fileName) {\n          dt.items.add(this.shadowElement.files[f]);\n        }\n      }\n\n      this.shadowElement.files = dt.files;\n      this.files = dt.files;\n      this.addFilesToFormData(Array.from(this.shadowElement.files));\n    }\n\n    this.value = [...filesContainer];\n    this.gcdsRemoveFile.emit(this.value);\n    this.gcdsChange.emit(this.value);\n    this.el.dispatchEvent(\n      new Event('change', { bubbles: true, composed: true }),\n    );\n    this.updateValidity();\n  };\n\n  /**\n   * Call any active validators\n   */\n  @Method()\n  async validate() {\n    handleValidationResult(\n      this.el as HTMLGcdsFileUploaderElement,\n      this._validator.validate(this.shadowElement.files),\n      this.label,\n      this.gcdsError,\n      this.gcdsValid,\n      this.lang,\n    );\n\n    this.inputTitle = this.errorMessage;\n  }\n\n  /**\n   * Check the validity of gcds-file-uploader\n   */\n  @Method()\n  public async checkValidity(): Promise<boolean> {\n    return this.internals.checkValidity();\n  }\n\n  /**\n   * Get validationMessage of gcds-file-uploader\n   */\n  @Method()\n  public async getValidationMessage(): Promise<string> {\n    return this.internals.validationMessage;\n  }\n\n  /**\n   * Emitted when the uploader has a validation error.\n   */\n  @StencilEvent() gcdsError!: EventEmitter<object>;\n\n  /**\n   * Emitted when the uploader has a validation error.\n   */\n  @StencilEvent() gcdsValid!: EventEmitter<object>;\n\n  @Listen('submit', { target: 'document' })\n  submitListener(e) {\n    if (e.target == this.el.closest('form')) {\n      if (this.validateOn && this.validateOn != 'other') {\n        this.validate();\n      }\n\n      if (this.hasError && this.validateOn != 'other') {\n        e.preventDefault();\n      }\n    }\n  }\n\n  /*\n   * Form internal functions\n   */\n  formResetCallback() {\n    this.internals.setFormValue('');\n    this.value = [];\n  }\n\n  formStateRestoreCallback(state) {\n    this.internals.setFormValue(state);\n    this.value = state;\n  }\n\n  /**\n   * Update gcds-file-uploader's validity using internal input\n   */\n  private updateValidity() {\n    if (!this.shadowElement) return;\n    const validity = this.shadowElement.validity;\n\n    let validationMessage = null;\n    if (validity?.valueMissing) {\n      validationMessage = this.lang === 'en' ? 'You must upload a file to continue.' : 'Vous devez téléverser un fichier pour continuer.';\n    }\n\n    this.internals.setValidity(\n      validity,\n      validationMessage,\n      this.shadowElement,\n    );\n\n    // Set input title when HTML error occruring\n    this.inputTitle = validationMessage;\n  }\n\n  /*\n   * Set form data for internals\n   */\n  private addFilesToFormData = files => {\n    const formData = new FormData();\n\n    if (files.length > 0) {\n      files.forEach(file => {\n        formData.append(this.name, file, file.name);\n      });\n    }\n\n    this.internals.setFormValue(formData);\n  };\n\n  /*\n   * Handle drop event on file uploader\n   */\n  private handleDrop(e) {\n    e.preventDefault();\n\n    const droppedFiles = e.dataTransfer.files;\n\n    if (droppedFiles && droppedFiles.length > 0) {\n      const dt = new DataTransfer();\n      for (const file of droppedFiles) {\n        dt.items.add(file);\n      }\n\n      if (dt.files.length > 0) {\n        this.shadowElement.files = dt.files;\n        this.files = dt.files;\n      }\n\n      this.gcdsChange.emit(this.value);\n      this.el.dispatchEvent(\n        new Event('change', { bubbles: true, composed: true }),\n      );\n      this.updateValidity();\n    }\n\n    // Focus file input after drop\n    this.shadowElement.focus();\n  }\n\n  /*\n   * Observe lang attribute change\n   */\n  updateLang() {\n    const observer = new MutationObserver(mutations => {\n      if (mutations[0].oldValue != this.el.lang) {\n        this.lang = this.el.lang;\n      }\n    });\n    observer.observe(this.el, observerConfig);\n  }\n\n  async componentWillLoad() {\n    // Define lang attribute\n    this.lang = assignLanguage(this.el);\n\n    this.updateLang();\n\n    this.validateDisabledSelect();\n    this.validateHasError();\n    this.validateErrorMessage();\n\n    // Assign required validator if needed\n    requiredValidator(this.el, 'file');\n\n    this.validateValidator();\n\n    this.inheritedAttributes = inheritAttributes(this.el, this.shadowElement);\n  }\n\n  async componentDidLoad() {\n    this.updateValidity();\n\n    // Logic to enable autofocus\n    if (this.autofocus) {\n      requestAnimationFrame(() => {\n        this.shadowElement?.focus();\n      });\n    }\n  }\n\n  render() {\n    const {\n      accept,\n      disabled,\n      errorMessage,\n      hasError,\n      hint,\n      label,\n      hideLabel,\n      lang,\n      multiple,\n      name,\n      required,\n      uploaderId,\n      value,\n      inputTitle,\n      autofocus,\n      form,\n      inheritedAttributes,\n    } = this;\n\n    const attrsInput = {\n      accept,\n      disabled,\n      multiple,\n      name,\n      required,\n      value,\n      title: inputTitle,\n      autofocus,\n      form,\n      ...inheritedAttributes,\n      'aria-describedby': `${inheritedAttributes['aria-describedby']\n        ? `${inheritedAttributes['aria-describedby']} `\n        : ''\n        }file-uploader__summary`,\n    };\n\n    const attrsLabel = {\n      label,\n      required,\n    };\n\n    if (hint || errorMessage) {\n      const hintID = hint ? `hint-${uploaderId} ` : '';\n      const errorID = errorMessage ? `error-message-${uploaderId} ` : '';\n      attrsInput['aria-describedby'] =\n        `${hintID}${errorID}${attrsInput['aria-describedby']}`;\n    }\n\n    return (\n      <Host>\n        <div\n          class={`gcds-file-uploader-wrapper ${disabled ? 'gcds-disabled' : ''\n            } ${hasError ? 'gcds-error' : ''}`}\n        >\n          <gcds-label\n            {...attrsLabel}\n            hide-label={hideLabel}\n            label-for={uploaderId}\n            lang={lang}\n          />\n\n          {hint ? <gcds-hint hint-id={uploaderId}>{hint}</gcds-hint> : null}\n\n          {errorMessage ? (\n            <gcds-error-message messageId={uploaderId}>\n              {errorMessage}\n            </gcds-error-message>\n          ) : null}\n\n          <div\n            class={`file-uploader__input ${value.length > 0 ? 'uploaded-files' : ''\n              }`}\n            onDrop={e => this.handleDrop(e)}\n            onDragOver={e => e.preventDefault()}\n          >\n            <button\n              type=\"button\"\n              tabindex=\"-1\"\n              onClick={() => this.shadowElement.click()}\n            >\n              {i18n[lang].button.upload}\n            </button>\n            <input\n              type=\"file\"\n              id={uploaderId}\n              {...attrsInput}\n              onBlur={() => this.onBlur()}\n              onFocus={() => this.gcdsFocus.emit()}\n              onInput={e => this.handleInput(e, this.gcdsInput)}\n              onChange={e => this.handleInput(e, this.gcdsChange)}\n              aria-invalid={hasError ? 'true' : 'false'}\n              ref={element =>\n                (this.shadowElement = element as HTMLInputElement)\n              }\n            />\n            {value.length > 0 ? (\n              <gcds-sr-only id=\"file-uploader__summary\">\n                <span>{i18n[lang].summary.selected} </span>\n                {value.map(file => (\n                  <span>{file} </span>\n                ))}\n              </gcds-sr-only>\n            ) : (\n              <gcds-sr-only id=\"file-uploader__summary\">\n                {i18n[lang].summary.unselected}\n              </gcds-sr-only>\n            )}\n          </div>\n\n          {value.length > 0\n            ? value.map(file => (\n              <div\n                class=\"file-uploader__uploaded-file\"\n                aria-label={`${i18n[lang].removeFile} ${file}.`}\n              >\n                <gcds-text margin-bottom=\"0\">{file}</gcds-text>\n                <button onClick={e => this.removeFile(e)}>\n                  <span>{i18n[lang].button.remove}</span>\n                  <gcds-icon name=\"close\" size=\"text\" margin-left=\"150\" />\n                </button>\n              </div>\n            ))\n            : null}\n        </div>\n      </Host>\n    );\n  }\n}\n"],"mappings":"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","ignoreList":[]}