import{p as e,H as t,d as r,h as i,c as s}from"./p-Bid1IElL.js";import{h as o,o as l,a,i as d}from"./p-BphlHDEW.js";import{d as u,g as c,r as n}from"./p-BwGU8uxz.js";import{d as p}from"./p-BPUZBykJ.js";import{d as f}from"./p-COMIv74k.js";import{d as h}from"./p-CkVRd3cw.js";import{d as g}from"./p-A25Hiffv.js";import{d as b}from"./p-C0IKfDRB.js";import{d as m}from"./p-C4FL9OV7.js";const v={en:{button:{remove:"Remove",upload:"Choose file"},summary:{selected:"Currently selected:",unselected:"No file currently selected."},removeFile:"Remove file",droppedError:"One or more of the dropped files is unable to be uploaded. Accepted file types:"},fr:{button:{remove:"Supprimer",upload:"Choisir un fichier"},summary:{selected:"Actuellement sélectionné:",unselected:"Aucun fichier actuellement sélectionné."},removeFile:"Supprimer le fichier",droppedError:"Un ou plusieurs fichiers déposés ne peuvent pas être téléversés. Types de fichiers acceptés :"}};const w="@layer reset, default, input, files, disabled, error, focus, active;@layer reset{:host{display:block}:host .gcds-file-uploader-wrapper{border:0;margin:0;padding:0}:host .gcds-file-uploader-wrapper button{cursor:pointer;font:inherit;outline:0}}@layer default{:host .gcds-file-uploader-wrapper{align-items:flex-start;color:var(--gcds-file-uploader-default-text);display:flex;flex-direction:column;font:var(--gcds-file-uploader-font-desktop);max-width:90%;transition:color .15s ease-in-out}@media only screen and (width < 48em){:host .gcds-file-uploader-wrapper{font:var(--gcds-file-uploader-font-mobile)}}:host .gcds-file-uploader-wrapper button{border-radius:var(--gcds-file-uploader-file-button-border-radius);transition:all .15s ease-in-out}}@layer input{:host .gcds-file-uploader-wrapper .file-uploader__input{display:inline-block;position:relative}:host .gcds-file-uploader-wrapper .file-uploader__input button{background-color:var(--gcds-file-uploader-button-background);border:var(--gcds-file-uploader-button-border-width) solid var(--gcds-file-uploader-button-text);color:var(--gcds-file-uploader-button-text);font-weight:var(--gcds-file-uploader-button-font-weight);margin:var(--gcds-file-uploader-button-margin);padding:var(--gcds-file-uploader-button-padding)}:host .gcds-file-uploader-wrapper .file-uploader__input input{cursor:pointer;height:100%;left:0;opacity:0;position:absolute;top:0;width:100%}:host .gcds-file-uploader-wrapper .file-uploader__input input::-webkit-file-upload-button{cursor:pointer}:host .gcds-file-uploader-wrapper .file-uploader__input #file-uploader__summary{height:0;margin:0;overflow:hidden;visibility:hidden}}@layer files{:host .gcds-file-uploader-wrapper .file-uploader__uploaded-file{align-items:center;border:var(--gcds-file-uploader-file-border-width) solid var(--gcds-file-uploader-file-border-color);display:flex;justify-content:space-between;max-width:var(--gcds-file-uploader-file-max-width);padding:var(--gcds-file-uploader-file-padding);width:100%}:host .gcds-file-uploader-wrapper .file-uploader__uploaded-file:not(:last-of-type){border-block-end:0}:host .gcds-file-uploader-wrapper .file-uploader__uploaded-file:last-of-type{margin:var(--gcds-file-uploader-button-margin)}:host .gcds-file-uploader-wrapper .file-uploader__uploaded-file gcds-text{overflow:auto}:host .gcds-file-uploader-wrapper .file-uploader__uploaded-file gcds-text::part(text){overflow:hidden;text-overflow:ellipsis;white-space:nowrap}:host .gcds-file-uploader-wrapper .file-uploader__uploaded-file button{align-items:center;background:transparent;border:0;color:var(--gcds-file-uploader-file-button-default-text);display:flex;font-weight:var(--gcds-file-uploader-button-font-weight);margin:var(--gcds-file-uploader-file-button-margin);padding:var(--gcds-file-uploader-file-button-padding)}:host .gcds-file-uploader-wrapper .file-uploader__uploaded-file button:not(:focus) span{overflow:visible;text-decoration:underline var(--gcds-file-uploader-file-button-default-decoration-thickness);text-underline-offset:var(\n          --gcds-file-uploader-file-button-underline-offset\n        )}}@layer disabled{:host .gcds-file-uploader-wrapper.gcds-disabled{color:var(--gcds-file-uploader-disabled-text)}:host .gcds-file-uploader-wrapper.gcds-disabled gcds-label{--gcds-label-text:currentColor}:host .gcds-file-uploader-wrapper.gcds-disabled gcds-hint{--gcds-hint-text:currentColor}:host .gcds-file-uploader-wrapper.gcds-disabled :is(.file-uploader__input,.file-uploader__uploaded-file){pointer-events:none}:host .gcds-file-uploader-wrapper.gcds-disabled .file-uploader__input button,:host .gcds-file-uploader-wrapper.gcds-disabled .file-uploader__uploaded-file,:host .gcds-file-uploader-wrapper.gcds-disabled .file-uploader__uploaded-file button{color:inherit}:host .gcds-file-uploader-wrapper.gcds-disabled .file-uploader__input button{background-color:var(--gcds-file-uploader-disabled-background);border-color:currentColor}}@layer error{:host .gcds-file-uploader-wrapper.gcds-error .file-uploader__uploaded-file{border-color:var(--gcds-file-uploader-file-danger-border-color)}}@layer hover{@media (hover:hover){:host .gcds-file-uploader-wrapper .file-uploader__input:not(:focus-within):hover button{background-color:var(--gcds-file-uploader-hover-button-background)}:host .gcds-file-uploader-wrapper .file-uploader__uploaded-file button:not(:focus):hover{color:var(--gcds-file-uploader-file-button-hover-text)}:host .gcds-file-uploader-wrapper .file-uploader__uploaded-file button:not(:focus):hover span{text-decoration-thickness:var(\n            --gcds-file-uploader-file-button-hover-decoration-thickness\n          )}}}@layer focus{:host .gcds-file-uploader-wrapper:focus-within .file-uploader__uploaded-file:focus-within{border-color:var(--gcds-file-uploader-file-focus-border-color)}:host .gcds-file-uploader-wrapper:focus-within .file-uploader__input:focus-within button,:host .gcds-file-uploader-wrapper:focus-within .file-uploader__uploaded-file button:focus{background-color:var(--gcds-file-uploader-focus-button-background);border-color:var(--gcds-file-uploader-focus-button-background);color:var(--gcds-file-uploader-focus-button-text);outline:var(--gcds-file-uploader-button-outline-width) solid var(--gcds-file-uploader-focus-button-background);outline-offset:var(--gcds-file-uploader-focus-button-outline-offset)}}@layer active{:host .gcds-file-uploader-wrapper .file-uploader__input:has(input:active) button{background-color:var(--gcds-file-uploader-active-button-background);border-color:var(--gcds-file-uploader-active-button-background);color:var(--gcds-file-uploader-active-button-text)}}";const _=e(class e extends t{constructor(){super();this.__registerHost();this.__attachShadow();this.gcdsFocus=r(this,"gcdsFocus");this.gcdsBlur=r(this,"gcdsBlur");this.gcdsChange=r(this,"gcdsChange");this.gcdsInput=r(this,"gcdsInput");this.gcdsRemoveFile=r(this,"gcdsRemoveFile");this.gcdsError=r(this,"gcdsError");this.gcdsValid=r(this,"gcdsValid");this.internals=this.attachInternals();this._validator=u;this.required=false;this.disabled=false;this.value=[];this.validateOn="blur";this.inheritedAttributes={};this.onBlur=()=>{if(this.validateOn=="blur"){this.validate()}this.gcdsBlur.emit()};this.handleInput=(e,t)=>{const r=[];const i=Array.from(e.target.files);this.files=e.target.files;i.map((e=>{r.push(e["name"])}));this.addFilesToFormData(i);this.value=[...r];if(this.validateOn=="blur"){setTimeout((()=>{this.validate()}),100)}if(e.type==="change"){const t=new e.constructor(e.type,e);this.el.dispatchEvent(t)}t.emit(this.value)};this.removeFile=e=>{e.preventDefault();const t=e.target.closest(".file-uploader__uploaded-file").childNodes[0].textContent;const r=this.value;const i=r.indexOf(t);if(i>-1){r.splice(i,1);const e=new DataTransfer;for(let r=0;r<this.shadowElement.files.length;r++){if(this.shadowElement.files[r].name!=t){e.items.add(this.shadowElement.files[r])}}this.shadowElement.files=e.files;this.files=e.files;this.addFilesToFormData(Array.from(this.shadowElement.files))}this.value=[...r];this.gcdsRemoveFile.emit(this.value);this.gcdsChange.emit(this.value);this.el.dispatchEvent(new Event("change",{bubbles:true,composed:true}))};this.addFilesToFormData=e=>{const t=new FormData;if(e.length>0){e.forEach((e=>{t.append(this.name,e,e.name)}))}this.internals.setFormValue(t)}}validateDisabledSelect(){if(this.required){this.disabled=false}}watchFiles(){const e=[];const t=Array.from(this.files);t.map((t=>{e.push(t["name"])}));this.addFilesToFormData(t);this.value=[...e]}validateErrorMessage(){if(this.disabled){this.errorMessage=""}else if(!this.hasError&&this.errorMessage){this.hasError=true}else if(this.errorMessage==""){this.hasError=false}}validateValidator(){this._validator=c(this.validator)}validateHasError(){if(this.disabled){this.hasError=false}}async validate(){o(this.el,this._validator.validate(this.shadowElement.files),this.label,this.gcdsError,this.gcdsValid,this.lang)}submitListener(e){if(e.target==this.el.closest("form")){if(this.validateOn&&this.validateOn!="other"){this.validate()}if(this.hasError&&this.validateOn!="other"){e.preventDefault()}}}formResetCallback(){this.internals.setFormValue("");this.value=[]}formStateRestoreCallback(e){this.internals.setFormValue(e);this.value=e}handleDrop(e){e.preventDefault();const t=e.dataTransfer.files;if(t&&t.length>0){const e=new DataTransfer;for(const r of t){e.items.add(r)}if(e.files.length>0){this.shadowElement.files=e.files;this.files=e.files}this.gcdsChange.emit(this.value);this.el.dispatchEvent(new Event("change",{bubbles:true,composed:true}))}this.shadowElement.focus()}updateLang(){const e=new MutationObserver((e=>{if(e[0].oldValue!=this.el.lang){this.lang=this.el.lang}}));e.observe(this.el,l)}async componentWillLoad(){this.lang=a(this.el);this.updateLang();this.validateDisabledSelect();this.validateHasError();this.validateErrorMessage();n(this.el,"file");this.validateValidator();this.inheritedAttributes=d(this.el,this.shadowElement)}render(){const{accept:e,disabled:t,errorMessage:r,hasError:o,hint:l,label:a,lang:d,multiple:u,name:c,required:n,uploaderId:p,value:f,inheritedAttributes:h}=this;const g=Object.assign(Object.assign({accept:e,disabled:t,multiple:u,name:c,required:n,value:f},h),{"aria-describedby":`${h["aria-describedby"]?`${h["aria-describedby"]} `:""}file-uploader__summary`});const b={label:a,required:n};if(l||r){const e=l?`hint-${p} `:"";const t=r?`error-message-${p} `:"";g["aria-describedby"]=`${e}${t}${g["aria-describedby"]}`}return i(s,{key:"7878cdd88945af0417c692bd1f8047ed9656fae2"},i("div",{key:"8f96a9626bab1d295cb85f81314bf341a0d85303",class:`gcds-file-uploader-wrapper ${t?"gcds-disabled":""} ${o?"gcds-error":""}`},i("gcds-label",Object.assign({key:"65b303f97908056330006d3b08012edcce41ba76"},b,{"label-for":p,lang:d})),l?i("gcds-hint",{"hint-id":p},l):null,r?i("gcds-error-message",{messageId:p},r):null,i("div",{key:"96f7d6e44231ac83983aeb1a29fd328eeda92b7f",class:`file-uploader__input ${f.length>0?"uploaded-files":""}`,onDrop:e=>this.handleDrop(e),onDragOver:e=>e.preventDefault()},i("button",{key:"b0b2f9f819998a975d6800da47997645fbe8630c",type:"button",tabindex:"-1",onClick:()=>this.shadowElement.click()},v[d].button.upload),i("input",Object.assign({key:"8f6a9bff60348cb19041c960f9374a1005659aff",type:"file",id:p},g,{onBlur:()=>this.onBlur(),onFocus:()=>this.gcdsFocus.emit(),onInput:e=>this.handleInput(e,this.gcdsInput),onChange:e=>this.handleInput(e,this.gcdsChange),"aria-invalid":o?"true":"false",ref:e=>this.shadowElement=e})),f.length>0?i("gcds-sr-only",{id:"file-uploader__summary"},i("span",null,v[d].summary.selected," "),f.map((e=>i("span",null,e," ")))):i("gcds-sr-only",{id:"file-uploader__summary"},v[d].summary.unselected)),f.length>0?f.map((e=>i("div",{class:"file-uploader__uploaded-file","aria-label":`${v[d].removeFile} ${e}.`},i("gcds-text",{"margin-bottom":"0"},e),i("button",{onClick:e=>this.removeFile(e)},i("span",null,v[d].button.remove),i("gcds-icon",{name:"close",size:"text","margin-left":"150"}))))):null))}static get delegatesFocus(){return true}static get formAssociated(){return true}get el(){return this}static get watchers(){return{disabled:["validateDisabledSelect"],files:["watchFiles"],errorMessage:["validateErrorMessage"],validator:["validateValidator"],hasError:["validateHasError"]}}static get style(){return w}},[81,"gcds-file-uploader",{uploaderId:[1537,"uploader-id"],name:[1],label:[513],required:[516],disabled:[1540],value:[1040],accept:[513],multiple:[516],files:[1040],errorMessage:[1537,"error-message"],hint:[513],validator:[1040],validateOn:[1025,"validate-on"],hasError:[32],inheritedAttributes:[32],lang:[32],validate:[64]},[[4,"submit","submitListener"]],{disabled:["validateDisabledSelect"],files:["watchFiles"],errorMessage:["validateErrorMessage"],validator:["validateValidator"],hasError:["validateHasError"]}]);function y(){if(typeof customElements==="undefined"){return}const e=["gcds-file-uploader","gcds-error-message","gcds-hint","gcds-icon","gcds-label","gcds-sr-only","gcds-text"];e.forEach((e=>{switch(e){case"gcds-file-uploader":if(!customElements.get(e)){customElements.define(e,_)}break;case"gcds-error-message":if(!customElements.get(e)){p()}break;case"gcds-hint":if(!customElements.get(e)){f()}break;case"gcds-icon":if(!customElements.get(e)){h()}break;case"gcds-label":if(!customElements.get(e)){g()}break;case"gcds-sr-only":if(!customElements.get(e)){b()}break;case"gcds-text":if(!customElements.get(e)){m()}break}}))}const k=_;const x=y;export{k as GcdsFileUploader,x as defineCustomElement};
//# sourceMappingURL=gcds-file-uploader.js.map