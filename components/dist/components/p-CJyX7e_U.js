import{p as e,H as t,c as s,h as i,d as a}from"./p-BQgY5XdM.js";import{i as r,h as l,o,a as d}from"./p-DOKR5HKI.js";import{d as c,g as h,r as n}from"./p-1b8Kykha.js";import{d as u}from"./p-Dff2I2ku.js";import{d as g}from"./p-CZq1Zpp8.js";import{d as f}from"./p-CwNv12Ch.js";import{d as b}from"./p-Cc9yC5rG.js";import{d as p}from"./p-DeFvi7Po.js";const v="@layer reset, default, disabled, error, focus;@layer reset{:host{display:block}:host .gcds-select-wrapper{border:0;margin:0;padding:0}:host .gcds-select-wrapper select{box-sizing:border-box}:host .gcds-select-wrapper slot{display:initial}}@layer default{:host .gcds-select-wrapper{color:var(--gcds-select-default-text);font:var(--gcds-select-font-desktop);max-width:75ch;transition:color .15s ease-in-out}@media only screen and (width < 48em){:host .gcds-select-wrapper{font:var(--gcds-select-font-mobile)}}:host .gcds-select-wrapper select{-webkit-appearance:none;-moz-appearance:none;background-color:var(--gcds-select-default-background);background-image:url(\"data:image/svg+xml;utf8,<svg width='16' height='10' viewBox='0 0 16 10' fill='none' xmlns='http://www.w3.org/2000/svg'><path d='M0.799988 0.900024L7.79999 7.90003L14.8 0.900024' stroke='currentColor' stroke-width='2'/></svg>\");background-position-x:var(--gcds-select-arrow-position-x);background-position-y:50%;background-repeat:no-repeat;border:var(--gcds-select-border-width) solid;border-radius:var(--gcds-select-border-radius);box-sizing:border-box;color:var(--gcds-select-default-text);display:block;font:inherit;height:auto;margin:var(--gcds-select-margin)!important;max-width:100%;min-height:var(--gcds-select-min-width-and-height);min-width:var(--gcds-select-min-width-and-height);padding:var(--gcds-select-padding)!important;transition:all .15s ease-in-out}}@layer disabled{:host .gcds-select-wrapper.gcds-disabled{color:var(--gcds-select-disabled-text)}:host .gcds-select-wrapper.gcds-disabled gcds-label{--gcds-label-text:currentColor}:host .gcds-select-wrapper.gcds-disabled gcds-hint{--gcds-hint-text:currentColor}:host .gcds-select-wrapper.gcds-disabled select:disabled{background-color:var(--gcds-select-disabled-background);border-color:var(--gcds-select-disabled-text);cursor:not-allowed}}@layer error{:host .gcds-select-wrapper.gcds-error:not(:focus-within) select{border-color:var(--gcds-select-danger-border)}}@layer focus{:host .gcds-select-wrapper:focus-within select:focus{border-color:var(--gcds-select-focus-border);box-shadow:var(--gcds-select-focus-box-shadow);outline:var(--gcds-select-outline-width) solid var(--gcds-select-focus-border);outline-offset:var(--gcds-select-border-width)}}";const m=e(class e extends t{constructor(){super();this.__registerHost();this.__attachShadow();this.gcdsChange=s(this,"gcdsChange");this.gcdsInput=s(this,"gcdsInput");this.gcdsFocus=s(this,"gcdsFocus");this.gcdsBlur=s(this,"gcdsBlur");this.gcdsError=s(this,"gcdsError");this.gcdsValid=s(this,"gcdsValid");this.internals=this.attachInternals();this.selectTitle="";this._validator=c;this.hideLabel=false;this.required=false;this.disabled=false;this.validateOn="blur";this.inheritedAttributes={};this.handleInput=(e,t)=>{const s=e.target&&e.target.value;this.value=s;this.internals.setFormValue(s);if(e.type==="change"){const t=new e.constructor(e.type,e);this.el.dispatchEvent(t)}else{this.updateValidity()}t.emit(this.value)};this.onBlur=()=>{if(this.validateOn==="blur"){this.validate()}this.gcdsBlur.emit()}}validateDisabledSelect(){if(this.required){this.disabled=false}}watchValue(e){if(!this.shadowElement)return;if(e&&this.checkIfValidValue(e)){this.internals.setFormValue(e);this.shadowElement.value=e}else{this.internals.setFormValue(null);this.value=null}this.updateValidity()}validateErrorMessage(){if(this.disabled){this.errorMessage=""}else if(!this.hasError&&this.errorMessage){this.hasError=true}else if(this.errorMessage==""){this.hasError=false}}get validity(){return this.internals.validity}validateValidator(){this._validator=h(this.validator)}validateHasError(){if(this.disabled){this.hasError=false}}ariaInvalidWatcher(){this.inheritedAttributes=r(this.el,this.shadowElement)}ariaDescriptiondWatcher(){this.inheritedAttributes=r(this.el,this.shadowElement)}async validate(){l(this.el,this._validator.validate(this.value),this.label,this.gcdsError,this.gcdsValid,this.lang);this.selectTitle=this.errorMessage}async checkValidity(){return this.internals.checkValidity()}async getValidationMessage(){return this.internals.validationMessage}submitListener(e){if(e.target==this.el.closest("form")){if(this.validateOn&&this.validateOn!="other"){this.validate()}if(this.hasError&&this.validateOn!="other"){e.preventDefault()}}}checkValueOrSelected(e){const t=e.getAttribute("value");if(this.value===t){e.setAttribute("selected","true");this.internals.setFormValue(t);this.initialValue=this.value}else if(e.hasAttribute("selected")){this.value=t;this.internals.setFormValue(t);this.initialValue=this.value?this.value:null}}checkIfValidValue(e){let t=false;this.options.forEach((s=>{if(s.nodeName==="OPTION"){const i=s.getAttribute("value");if(i===e){t=true}}else if(s.nodeName==="OPTGROUP"){const i=Array.from(s.children);i.map((s=>{const i=s.getAttribute("value");if(i===e){t=true}}))}}));return t}formResetCallback(){if(this.value!=this.initialValue){this.internals.setFormValue(this.initialValue);this.value=this.initialValue}}formStateRestoreCallback(e){this.internals.setFormValue(e);this.value=e}updateValidity(){if(!this.shadowElement)return;const e=this.shadowElement.validity;let t=null;if(e===null||e===void 0?void 0:e.valueMissing){t=this.lang==="en"?"Choose an option to continue.":"Choisissez une option pour continuer."}this.internals.setValidity(e,t,this.shadowElement);this.selectTitle=t}observeOptions(){const e={attributes:false,childList:true,characterData:true,subtree:true};const t=new MutationObserver((()=>{this.options=Array.from(this.el.children);this.value=null}));t.observe(this.el,e)}updateLang(){const e=new MutationObserver((e=>{if(e[0].oldValue!=this.el.lang){this.lang=this.el.lang}}));e.observe(this.el,o)}async componentWillLoad(){this.lang=d(this.el);this.updateLang();this.validateDisabledSelect();this.validateHasError();this.validateErrorMessage();n(this.el,"select");this.validateValidator();this.inheritedAttributes=r(this.el,this.shadowElement);if(this.el.children){this.options=Array.from(this.el.children);this.options.forEach((e=>{if(e.nodeName==="OPTION"){this.checkValueOrSelected(e)}else if(e.nodeName==="OPTGROUP"){const t=Array.from(e.children);t.map((e=>{this.checkValueOrSelected(e)}))}}));this.value=this.checkIfValidValue(this.value)?this.value:null}}async componentDidLoad(){this.observeOptions();this.updateValidity();if(this.autofocus){requestAnimationFrame((()=>{var e;(e=this.shadowElement)===null||e===void 0?void 0:e.focus()}))}}render(){const{lang:e,selectId:t,label:s,hideLabel:r,required:l,disabled:o,defaultValue:d,value:c,hint:h,errorMessage:n,inheritedAttributes:u,hasError:g,name:f,options:b,selectTitle:p,autofocus:v,form:m,autocomplete:w}=this;const y=Object.assign({name:f,disabled:o,required:l,value:c,title:p,autofocus:v,form:m,autocomplete:w},u);const k={label:s,required:l};if(h||n){const e=h?`hint-${t} `:"";const s=n?`error-message-${t} `:"";y["aria-describedby"]=`${e}${s}${y["aria-describedby"]?`${y["aria-describedby"]}`:""}`}return i(a,{key:"896b50853f39ed4da9bfcaa2f9d7e90ff837c8d6"},i("div",{key:"b908f1cc32d6731196e9e2681ddad1956783f593",class:`gcds-select-wrapper ${o?"gcds-disabled":""} ${g?"gcds-error":""}`},i("gcds-label",Object.assign({key:"52627d1f6c3e0e33f17f504aa57d9804a23abca1"},k,{"hide-label":r,"label-for":t,lang:e})),h?i("gcds-hint",{"hint-id":t},h):null,n?i("gcds-error-message",{messageId:t},n):null,i("select",Object.assign({key:"f996305b187039b81b40e491e104bd4a4e4c57ed"},y,{id:t,onBlur:()=>this.onBlur(),onFocus:()=>this.gcdsFocus.emit(),onInput:e=>this.handleInput(e,this.gcdsInput),onChange:e=>this.handleInput(e,this.gcdsChange),"aria-invalid":u["aria-invalid"]==="true"?u["aria-invalid"]:n?"true":"false",part:"select",ref:e=>this.shadowElement=e}),d?i("option",{value:"",disabled:true,selected:true},d):null,b.map((e=>{if(e.nodeName==="OPTION"){const t=e.hasAttribute("selected")?{selected:true}:null;return i("option",Object.assign({value:e.getAttribute("value")},t),e.textContent)}else if(e.nodeName==="OPTGROUP"){const t=Array.from(e.children).map((e=>{const t=e.hasAttribute("selected")?{selected:true}:null;return i("option",Object.assign({value:e.getAttribute("value")},t),e.textContent)}));return i("optgroup",{label:e.getAttribute("label")},t)}})))))}static get delegatesFocus(){return true}static get formAssociated(){return true}get el(){return this}static get watchers(){return{disabled:["validateDisabledSelect"],value:["watchValue"],errorMessage:["validateErrorMessage"],validator:["validateValidator"],hasError:["validateHasError"],"aria-invalid":["ariaInvalidWatcher"],"aria-description":["ariaDescriptiondWatcher"]}}static get style(){return v}},[81,"gcds-select",{selectId:[1537,"select-id"],label:[513],hideLabel:[4,"hide-label"],name:[513],required:[516],disabled:[1540],defaultValue:[513,"default-value"],autofocus:[516],form:[513],autocomplete:[1],value:[1025],errorMessage:[1537,"error-message"],hint:[513],validity:[2064],validator:[1040],validateOn:[1025,"validate-on"],hasError:[32],inheritedAttributes:[32],lang:[32],options:[32],validate:[64],checkValidity:[64],getValidationMessage:[64]},[[4,"submit","submitListener"]],{disabled:["validateDisabledSelect"],value:["watchValue"],errorMessage:["validateErrorMessage"],validator:["validateValidator"],hasError:["validateHasError"],"aria-invalid":["ariaInvalidWatcher"],"aria-description":["ariaDescriptiondWatcher"]}]);function w(){if(typeof customElements==="undefined"){return}const e=["gcds-select","gcds-error-message","gcds-hint","gcds-icon","gcds-label","gcds-text"];e.forEach((e=>{switch(e){case"gcds-select":if(!customElements.get(e)){customElements.define(e,m)}break;case"gcds-error-message":if(!customElements.get(e)){u()}break;case"gcds-hint":if(!customElements.get(e)){g()}break;case"gcds-icon":if(!customElements.get(e)){f()}break;case"gcds-label":if(!customElements.get(e)){b()}break;case"gcds-text":if(!customElements.get(e)){p()}break}}))}export{m as G,w as d};
//# sourceMappingURL=p-CJyX7e_U.js.map