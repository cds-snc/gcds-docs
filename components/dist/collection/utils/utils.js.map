{"version":3,"file":"utils.js","sourceRoot":"","sources":["../../src/utils/utils.ts"],"names":[],"mappings":"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","sourcesContent":["import { EventEmitter } from '@stencil/core';\n\nexport function format(label: string): string {\n  return label ? ` ${label}` : 'Fallback Button Label';\n}\n\nexport const inheritAttributes = (\n  el: HTMLElement,\n  shadowElement: HTMLElement,\n  attributes: string[] = [],\n) => {\n  let attributeObject = {};\n  let attributesToRemove = [];\n\n  // Check for any aria attributes\n  for (let i = 0; i < el.attributes.length; i++) {\n    const attr = el.attributes[i];\n    if (attr.name.includes('aria-')) {\n      attributeObject[attr.name] = attr.value;\n      attributesToRemove.push(attr.name);\n    }\n  }\n\n  // Check for attributes defined by component\n  attributes.forEach(attr => {\n    if (\n      el.hasAttribute(attr) ||\n      (shadowElement && shadowElement.hasAttribute(attr))\n    ) {\n      const value = el.getAttribute(attr) || shadowElement.getAttribute(attr);\n      if (value !== null) {\n        attributeObject[attr] =\n          el.getAttribute(attr) || shadowElement.getAttribute(attr);\n      }\n      el.removeAttribute(attr);\n    }\n  });\n\n  return attributeObject;\n};\n\nexport const assignLanguage = (el: HTMLElement) => {\n  let lang = '';\n  if (!el.getAttribute('lang')) {\n    const closestLangAttribute = closestElement('[lang]', el)?.getAttribute(\n      'lang',\n    );\n    if (closestLangAttribute == 'en' || !closestLangAttribute) {\n      lang = 'en';\n    } else {\n      lang = 'fr';\n    }\n  } else if (el.getAttribute('lang') == 'en') {\n    lang = 'en';\n  } else {\n    lang = 'fr';\n  }\n\n  return lang;\n};\n\n// Allows use of closest() function across shadow boundaries\nexport const closestElement = (selector, el) => {\n  if (el) {\n    return (\n      (el &&\n        el != document &&\n        typeof window != 'undefined' &&\n        el != window &&\n        el.closest(selector)) ||\n      closestElement(selector, el.getRootNode().host)\n    );\n  }\n\n  return null;\n};\n\nexport const observerConfig = {\n  attributes: true,\n  attributeOldValue: true,\n  attributeFilter: ['lang'],\n};\n\n// For validation - check if element has a checked checkbox/radio sibling\nexport const elementGroupCheck = name => {\n  let hasCheck = false;\n  const element = document.querySelectorAll<HTMLFormElement>(\n    `input[name=${name}]`,\n  );\n  for (let i = 0; i < element.length; i++) {\n    if (element[i].checked) {\n      hasCheck = true;\n    }\n  }\n  return !hasCheck;\n};\n\n// Emit event with logic to cancel HTML events\n// Returns false if event has been prevented\nexport const emitEvent = (\n  e: Event,\n  customEvent: EventEmitter,\n  value?: unknown,\n) => {\n  const event = customEvent.emit(value);\n\n  // Was the custom or native event interrupted\n  if (event.defaultPrevented || e.defaultPrevented) {\n    // Stop native HTML event in shadow-dom\n    e.preventDefault();\n    return false;\n  }\n\n  return true;\n};\n\n/* Log validation error for required properties in components\n * @param name - name of the component i.e. <gcds-*>\n * @param errorArr - array of attributes with errors\n * @param optionalAttrsArrToRemove - array of optional attributes with errors to be removed from this error message\n */\nexport const logError = (\n  name: string,\n  errorArr: string[],\n  optionalAttrsArrToRemove?: string[],\n) => {\n  let engMsg = 'Render error, please check required properties.';\n  let frMsg = 'Erreur de rendu, veuillez vérifier les propriétés requises.';\n  let errors = [...errorArr];\n\n  // remove any potential optional attributes from errors array\n  if (optionalAttrsArrToRemove && optionalAttrsArrToRemove.length > 0) {\n    for (const optionalAttr of optionalAttrsArrToRemove) {\n      if (errors.includes(optionalAttr)) {\n        errors.splice(errors.indexOf(optionalAttr), 1);\n      }\n    }\n  }\n\n  console.error(\n    `${name}: ${engMsg} (${errors}) | ${name}: ${frMsg} (${errors})`,\n  );\n};\n\n/* Check for valid date\n * @param dateString - the date to check\n */\nexport const isValidDate = (dateString: string, forceFormat?: 'full' | 'compact') => {\n  // Define regex pattern to match YYYY-MM-DD format\n  let fullregex = /^\\d{4}-\\d{2}-\\d{2}$/;\n  let compactregex = /^\\d{4}-\\d{2}$/;\n  let format = '';\n\n  // Check if the format matches the regex\n  if (fullregex.test(dateString)) {\n    format = 'full';\n  } else if (compactregex.test(dateString)) {\n    format = 'compact';\n  } else {\n    return false;\n  }\n\n  if (forceFormat && format != forceFormat) {\n    return false;\n  }\n\n  // Parse the date string into a Date object\n  const formattedDate = `${dateString}${format === 'compact' ? '-15' : ''}`;\n\n  // Check if the date is valid\n  const [year, month, day] = formattedDate.split('-').map(Number);\n\n  const thirtyOneDays = [1, 3, 5, 7, 8, 10, 12];\n  const thirtyDays = [4, 6, 9, 11];\n\n  if (month < 1 || month > 12) {\n    return false;\n  } else if (thirtyDays.includes(month) && (day < 1 || day > 30)) {\n    return false;\n  } else if (thirtyOneDays.includes(month) && (day < 1 || day > 31)) {\n    return false;\n  } else if (!isLeapYear(year) && month === 2 && (day < 1 || day > 28)) {\n    return false;\n  } else if (isLeapYear(year) && month === 2 && (day < 1 || day > 29)) {\n    return false;\n  }\n\n  return true;\n};\n\nfunction isLeapYear(y: number) {\n  return !(y & 3 || (!(y % 25) && y & 15));\n}\n"]}